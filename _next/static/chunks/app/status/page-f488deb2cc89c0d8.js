(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{7569:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ClientStatusContent:()=>u});var a=s(47210),r=s(72776),n=s(27636),i=s(7590),d=s(63650),c=s(74381),l=s(62659);let o=JSON.parse('{"w":{"Platform":"平台","Game":"游戏","Logins":"登录","Matches":"对局","Social":"社交","Store":"商店","Windows":"Windows","macOS":"macOS","Android":"Android","iOS":"iOS"},"h":{"Platform":"各平台客户端状态","Game":"游戏服务状态","Logins":"登录和认证服务状态","Matches":"对局和活动服务状态","Social":"社交功能状态","Store":"商店和兑换码服务状态"}}');function m(e){return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function u(){let{data:e,isLoading:t,error:s,fetchStatus:u}=(0,c.Xk)();if((0,d.useEffect)(()=>{u(!0)},[u]),t)return(0,a.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,a.jsx)(r.A,{className:"w-6 h-6 animate-spin text-[--muted-foreground]"})});if(s||!e)return(0,a.jsxs)("div",{className:"flex items-center justify-center h-32 text-red-500",children:[(0,a.jsx)(n.A,{className:"w-6 h-6 mr-2"}),(0,a.jsx)("span",{children:s||"加载失败"})]});let h=e.components.find(e=>"Platform"===e.name),x=e.components.filter(e=>!e.group_id&&"Platform"!==e.name),p=e.scheduled_maintenances.length>0,f=e=>({...e,name:o.w[e.name]||e.name,description:o.h[e.name]||e.description}),j=e.components.reduce((e,t)=>(e[t.id]=f(t),e),{}),g=h?f(h):null,v=x.map(f);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-[--card] rounded-lg p-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-lg font-medium mb-2",children:[(0,a.jsx)(l.kW,{status:"none"===e.status.indicator?"operational":"maintenance"===e.status.indicator?"maintenance":"major_outage"}),(0,a.jsx)("span",{children:"none"===e.status.indicator?"所有服务正常运行":"maintenance"===e.status.indicator?"服务正在维护中":"部分服务出现问题"})]}),"none"!==e.status.indicator&&(0,a.jsx)("p",{className:"text-[--muted-foreground]",children:e.status.description})]}),e.incidents.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"突发事件"}),(0,a.jsx)("div",{className:"space-y-4",children:e.incidents.map(e=>(0,a.jsxs)("div",{className:"bg-[--card] rounded-lg p-6 border border-[--border]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(i.A,{className:"w-5 h-5 text-yellow-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsx)("div",{className:"divide-y divide-[--border]/20",children:e.incident_updates.map((e,t)=>(0,a.jsxs)("div",{className:"py-4 first:pt-0 last:pb-0",children:[(0,a.jsxs)("div",{className:"text-sm whitespace-pre-wrap",children:[(0,a.jsx)("span",{className:"font-medium text-[--foreground]",children:"investigating"===e.status?"正在调查":"identified"===e.status?"已确认问题":"monitoring"===e.status?"监控中":"resolved"===e.status?"已解决":e.status})," - ",e.body]}),(0,a.jsxs)("div",{className:"text-xs text-[--muted-foreground]/75 mt-2",children:["发布于：",m(e.created_at)]})]},t))})]},e.id))})]}),p&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"计划维护"}),(0,a.jsx)("div",{className:"space-y-4",children:e.scheduled_maintenances.map(e=>(0,a.jsxs)("div",{className:"bg-[--card] rounded-lg p-6 border border-[--border]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(r.A,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsxs)("div",{className:"text-xs text-[--muted-foreground]/75 mb-4",children:["时间：",m(e.scheduled_for)," - ",m(e.scheduled_until)]}),(0,a.jsx)("div",{className:"divide-y divide-[--border]/20",children:e.incident_updates.map((t,s)=>(0,a.jsxs)("div",{className:"py-4 first:pt-0 last:pb-0",children:[(0,a.jsxs)("div",{className:"text-sm whitespace-pre-wrap",children:[(0,a.jsx)("span",{className:"font-medium text-[--foreground]",children:"scheduled"===e.status?"已排期":"in_progress"===e.status?"进行中":"completed"===e.status?"已完成":e.status})," - ",t.body]}),(0,a.jsxs)("div",{className:"text-xs text-[--muted-foreground]/75 mt-2",children:["发布于：",m(t.created_at)]})]},s))})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"服务状态"}),(0,a.jsxs)("div",{className:"divide-y divide-[--border] border border-[--border] rounded-lg overflow-hidden",children:[g&&(0,a.jsx)(l.XK,{group:g,components:j}),v.map(e=>(0,a.jsxs)("div",{className:"bg-[--card] flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.kW,{status:e.status}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-sm text-[--muted-foreground]",children:e.description})]})]}),(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(l.E3,{status:e.status})})]},e.id))]})]})]})}},7590:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(63334).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},27636:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(63334).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},53691:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ComponentGroup:()=>d});var a=s(47210),r=s(63650),n=s(54415),i=s(62659);function d(e){let{group:t,components:s}=e,[d,c]=(0,r.useState)(!1);return t.components&&0!==t.components.length?(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-4 bg-[--card] hover:bg-[--accent] transition-colors",onClick:()=>c(!d),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.kW,{status:t.status}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"font-medium text-left",children:t.name})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.E3,{status:t.status}),(0,a.jsx)(n.A,{className:"w-5 h-5 transition-transform ".concat(d?"rotate-180":"")})]})]}),d&&(0,a.jsx)("div",{className:"divide-y divide-[--border] bg-[--card]",children:t.components.map(e=>{let t=s[e];return t?(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 pl-12 hover:bg-[--accent] transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.kW,{status:t.status}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"font-medium",children:t.name})})]}),(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(i.E3,{status:t.status})})]},t.id):null})})]}):null}},54415:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(63334).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},62659:(e,t,s)=>{"use strict";s.d(t,{XK:()=>a.ComponentGroup,kW:()=>l,E3:()=>o});var a=s(53691),r=s(47210);let n=(0,s(63334).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=s(7590),d=s(27636),c=s(72776);function l(e){let{status:t}=e;switch(t){case"operational":case"none":return(0,r.jsx)(n,{className:"w-5 h-5 text-emerald-500"});case"degraded_performance":case"partial_outage":case"minor":return(0,r.jsx)(i.A,{className:"w-5 h-5 text-yellow-500"});case"major_outage":case"major":case"critical":return(0,r.jsx)(d.A,{className:"w-5 h-5 text-red-500"});case"under_maintenance":case"maintenance":return(0,r.jsx)(c.A,{className:"w-5 h-5 text-blue-500"});default:return(0,r.jsx)(c.A,{className:"w-5 h-5 text-[--muted-foreground]"})}}function o(e){let{status:t}=e;return(0,r.jsx)("span",{children:{operational:"正常",degraded_performance:"性能下降",partial_outage:"部分中断",major_outage:"主要中断",under_maintenance:"维护中"}[t]||t})}s(7569)},63334:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(63650);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:l="",children:o,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:s,strokeWidth:c?24*Number(d)/Number(r):d,className:n("lucide",l),...u},[...m.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{className:c,...l}=s;return(0,a.createElement)(d,{ref:i,iconNode:t,className:n("lucide-".concat(r(e)),c),...l})});return s.displayName="".concat(e),s}},72621:(e,t,s)=>{"use strict";s.d(t,{v:()=>c});var a=s(63650);let r=e=>{let t,s=new Set,a=(e,a)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,n={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e))},i=t=e(a,r,n);return n},n=e=>e?r(e):r,i=e=>e,d=e=>{let t=n(e),s=e=>(function(e,t=i){let s=a.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return a.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},c=e=>e?d(e):d},72776:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(63334).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},74381:(e,t,s)=>{"use strict";s.d(t,{xp:()=>n,LJ:()=>d,Xk:()=>i});var a=s(72621);let r=new Date().toISOString().split("T")[0],n=(0,a.v)(e=>({cards:[],chineseCards:{},params:{expansion:"TDM",format:"PremierDraft",start_date:"2016-01-01",end_date:r},isLoading:!1,error:null,setCards:t=>e({cards:t}),setChineseCards:t=>e(e=>{let s={...e.chineseCards};return t.forEach(e=>{s[e.name]=e,e.faceName&&(s[e.faceName]=e)}),{chineseCards:s}}),setParams:t=>e(e=>({params:{...e.params,...t}})),setIsLoading:t=>e({isLoading:t}),setError:t=>e({error:t})})),i=(0,a.v)((e,t)=>({data:null,isLoading:!1,error:null,lastUpdated:null,fetchStatus:async function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t(),r=Date.now();if(s||!a.data||!a.lastUpdated||!(r-a.lastUpdated<6e4)){e({isLoading:!0});try{let t=await fetch("https://magicthegatheringarena.statuspage.io/api/v2/summary.json");if(!t.ok)throw Error("获取状态信息失败");let s=await t.json();e({data:s,error:null,lastUpdated:r})}catch(t){e({error:t instanceof Error?t.message:"未知错误",data:null})}finally{e({isLoading:!1})}}}})),d=(0,a.v)(e=>({chineseSetNames:{},isLoading:!1,error:null,hasLoaded:!1,fetchChineseSetNames:async()=>{let t=d.getState();if(!t.hasLoaded&&!t.isLoading)try{e({isLoading:!0});let t=await fetch("https://sbwsz.com/static/setName.json");if(!t.ok)throw Error("获取系列中文名称失败");let s=await t.json();e({chineseSetNames:s,error:null,hasLoaded:!0})}catch(t){e({error:t instanceof Error?t:Error("获取系列中文名称失败")})}finally{e({isLoading:!1})}}}))},91818:(e,t,s)=>{Promise.resolve().then(s.bind(s,7569)),Promise.resolve().then(s.bind(s,53691))}},e=>{var t=t=>e(e.s=t);e.O(0,[25,317,358],()=>t(91818)),_N_E=e.O()}]);