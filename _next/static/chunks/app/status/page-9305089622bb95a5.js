(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{3975:(e,s,t)=>{"use strict";t.d(s,{xp:()=>r,LJ:()=>d,Xk:()=>i});var a=t(15189);let n=new Date().toISOString().split("T")[0],r=(0,a.v)(e=>({cards:[],chineseCards:{},params:{expansion:"EOE",format:"PremierDraft",start_date:"2016-01-01",end_date:n},isLoading:!1,error:null,setCards:s=>e({cards:s}),setChineseCards:s=>e(e=>{let t={...e.chineseCards};return s.forEach(e=>{t[e.name]=e,e.face_name&&(t[e.face_name]=e)}),{chineseCards:t}}),setParams:s=>e(e=>({params:{...e.params,...s}})),setIsLoading:s=>e({isLoading:s}),setError:s=>e({error:s})})),i=(0,a.v)((e,s)=>({data:null,isLoading:!1,error:null,lastUpdated:null,fetchStatus:async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=s(),n=Date.now();if(t||!a.data||!a.lastUpdated||!(n-a.lastUpdated<6e4)){e({isLoading:!0});try{let s=await fetch("https://magicthegatheringarena.statuspage.io/api/v2/summary.json");if(!s.ok)throw Error("获取状态信息失败");let t=await s.json();e({data:t,error:null,lastUpdated:n})}catch(s){e({error:s instanceof Error?s.message:"未知错误",data:null})}finally{e({isLoading:!1})}}}})),d=(0,a.v)(e=>({chineseSetNames:{},isLoading:!1,error:null,hasLoaded:!1,fetchChineseSetNames:async()=>{let s=d.getState();if(!s.hasLoaded&&!s.isLoading)try{e({isLoading:!0});let s=await fetch("https://mtgch.com/api/v1/sets/");if(!s.ok)throw Error("获取系列中文名称失败");let t=(await s.json()).reduce((e,s)=>(s.translated_name&&(e[s.code]=s.translated_name),e),{});e({chineseSetNames:t,error:null,hasLoaded:!0})}catch(s){e({error:s instanceof Error?s:Error("获取系列中文名称失败")})}finally{e({isLoading:!1})}}}))},18127:(e,s,t)=>{"use strict";t.r(s),t.d(s,{ClientStatusContent:()=>x});var a=t(41366),n=t(86645),r=t(84989),i=t(54891),d=t(14358),c=t(3975),l=t(33269);let o=JSON.parse('{"w":{"Platform":"平台","Game":"游戏","Logins":"登录","Matches":"对局","Social":"社交","Store":"商店","Windows":"Windows","macOS":"macOS","Android":"Android","iOS":"iOS"},"h":{"Platform":"各平台客户端状态","Game":"游戏服务状态","Logins":"登录和认证服务状态","Matches":"对局和活动服务状态","Social":"社交功能状态","Store":"商店和兑换码服务状态"}}');var m=t(8725),u=t(31286);function h(e){let s=(0,m.H)(e);return(0,u.f)(s)?s.toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):(console.warn("Invalid date string passed to formatDateTime: ".concat(e)),"无效日期")}function x(){let{data:e,isLoading:s,error:t,fetchStatus:m}=(0,c.Xk)();if((0,d.useEffect)(()=>{m(!0)},[m]),s)return(0,a.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,a.jsx)(n.A,{className:"w-6 h-6 animate-spin text-[--muted-foreground]"})});if(t||!e)return(0,a.jsxs)("div",{className:"flex items-center justify-center h-32 text-red-500",children:[(0,a.jsx)(r.A,{className:"w-6 h-6 mr-2"}),(0,a.jsx)("span",{children:t||"加载失败"})]});let u=e.components.find(e=>"Platform"===e.name),x=e.components.filter(e=>!e.group_id&&"Platform"!==e.name),p=e.scheduled_maintenances.length>0,f=e=>({...e,name:o.w[e.name]||e.name,description:o.h[e.name]||e.description}),j=e.components.reduce((e,s)=>(e[s.id]=f(s),e),{}),g=u?f(u):null,v=x.map(f);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-[--card] rounded-lg p-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-lg font-medium mb-2",children:[(0,a.jsx)(l.kW,{status:"none"===e.status.indicator?"operational":"maintenance"===e.status.indicator?"maintenance":"major_outage"}),(0,a.jsx)("span",{children:"none"===e.status.indicator?"所有服务正常运行":"maintenance"===e.status.indicator?"服务正在维护中":"部分服务出现问题"})]}),"none"!==e.status.indicator&&(0,a.jsx)("p",{className:"text-[--muted-foreground]",children:e.status.description})]}),e.incidents.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"突发事件"}),(0,a.jsx)("div",{className:"space-y-4",children:e.incidents.map(e=>(0,a.jsxs)("div",{className:"bg-[--card] rounded-lg p-6 border border-[--border]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(i.A,{className:"w-5 h-5 text-yellow-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsx)("div",{className:"divide-y divide-[--border]/20",children:e.incident_updates.map((e,s)=>(0,a.jsxs)("div",{className:"py-4 first:pt-0 last:pb-0",children:[(0,a.jsxs)("div",{className:"text-sm whitespace-pre-wrap",children:[(0,a.jsx)("span",{className:"font-medium text-[--foreground]",children:"investigating"===e.status?"正在调查":"identified"===e.status?"已确认问题":"monitoring"===e.status?"监控中":"resolved"===e.status?"已解决":e.status})," - ",e.body]}),(0,a.jsxs)("div",{className:"text-xs text-[--muted-foreground]/75 mt-2",children:["发布于：",h(e.created_at)]})]},s))})]},e.id))})]}),p&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"计划维护"}),(0,a.jsx)("div",{className:"space-y-4",children:e.scheduled_maintenances.map(e=>(0,a.jsxs)("div",{className:"bg-[--card] rounded-lg p-6 border border-[--border]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsxs)("div",{className:"text-xs text-[--muted-foreground]/75 mb-4",children:["时间：",h(e.scheduled_for)," - ",h(e.scheduled_until)]}),(0,a.jsx)("div",{className:"divide-y divide-[--border]/20",children:e.incident_updates.map((s,t)=>(0,a.jsxs)("div",{className:"py-4 first:pt-0 last:pb-0",children:[(0,a.jsxs)("div",{className:"text-sm whitespace-pre-wrap",children:[(0,a.jsx)("span",{className:"font-medium text-[--foreground]",children:"scheduled"===e.status?"已排期":"in_progress"===e.status?"进行中":"completed"===e.status?"已完成":e.status})," - ",s.body]}),(0,a.jsxs)("div",{className:"text-xs text-[--muted-foreground]/75 mt-2",children:["发布于：",h(s.created_at)]})]},t))})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"服务状态"}),(0,a.jsxs)("div",{className:"divide-y divide-[--border] border border-[--border] rounded-lg overflow-hidden",children:[g&&(0,a.jsx)(l.XK,{group:g,components:j}),v.map(e=>(0,a.jsxs)("div",{className:"bg-[--card] flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.kW,{status:e.status}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-sm text-[--muted-foreground]",children:e.description})]})]}),(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(l.E3,{status:e.status})})]},e.id))]})]})]})}},33269:(e,s,t)=>{"use strict";t.d(s,{XK:()=>a.ComponentGroup,kW:()=>l,E3:()=>o});var a=t(95661),n=t(41366);let r=(0,t(21578).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=t(54891),d=t(84989),c=t(86645);function l(e){let{status:s}=e;switch(s){case"operational":case"none":return(0,n.jsx)(r,{className:"w-5 h-5 text-emerald-500"});case"degraded_performance":case"partial_outage":case"minor":return(0,n.jsx)(i.A,{className:"w-5 h-5 text-yellow-500"});case"major_outage":case"major":case"critical":return(0,n.jsx)(d.A,{className:"w-5 h-5 text-red-500"});case"under_maintenance":case"maintenance":return(0,n.jsx)(c.A,{className:"w-5 h-5 text-blue-500"});default:return(0,n.jsx)(c.A,{className:"w-5 h-5 text-[--muted-foreground]"})}}function o(e){let{status:s}=e;return(0,n.jsx)("span",{children:{operational:"正常",degraded_performance:"性能下降",partial_outage:"部分中断",major_outage:"主要中断",under_maintenance:"维护中"}[s]||s})}t(18127)},46686:(e,s,t)=>{Promise.resolve().then(t.bind(t,18127)),Promise.resolve().then(t.bind(t,95661))},54891:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(21578).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},84989:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(21578).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},95661:(e,s,t)=>{"use strict";t.r(s),t.d(s,{ComponentGroup:()=>d});var a=t(41366),n=t(14358),r=t(58874),i=t(33269);function d(e){let{group:s,components:t}=e,[d,c]=(0,n.useState)(!1);return s.components&&0!==s.components.length?(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-4 bg-[--card] hover:bg-[--accent] transition-colors",onClick:()=>c(!d),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.kW,{status:s.status}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"font-medium text-left",children:s.name})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.E3,{status:s.status}),(0,a.jsx)(r.A,{className:"w-5 h-5 transition-transform ".concat(d?"rotate-180":"")})]})]}),d&&(0,a.jsx)("div",{className:"divide-y divide-[--border] bg-[--card]",children:s.components.map(e=>{let s=t[e];return s?(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 pl-12 hover:bg-[--accent] transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.kW,{status:s.status}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"font-medium",children:s.name})})]}),(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(i.E3,{status:s.status})})]},s.id):null})})]}):null}}},e=>{e.O(0,[409,986,330,358],()=>e(e.s=46686)),_N_E=e.O()}]);