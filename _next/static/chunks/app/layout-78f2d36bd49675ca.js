(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{9187:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(48502).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},15659:(e,t,r)=>{"use strict";r.d(t,{$:()=>a});var s=r(82995);function a(e){let{variant:t="primary",size:r="md",className:a,...i}=e;return(0,s.jsx)("button",{className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[--primary]"," ").concat({primary:"bg-[--primary] text-[--primary-foreground] hover:brightness-110 active:scale-[0.98]",secondary:"bg-[--background-subtle] text-[--foreground] hover:brightness-95 active:scale-[0.98]",ghost:"bg-transparent text-[--foreground-muted] hover:bg-[--background-subtle] hover:text-[--foreground] active:scale-[0.98]"}[t]," ").concat({sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",icon:"h-9 w-9 p-0"}[r]," ").concat(a),...i})}},19890:(e,t,r)=>{"use strict";r.d(t,{KeyruneReplacer:()=>c});var s=r(79283),a=r(23661);let i=new Map;async function n(e){if(i.has(e))return i.get(e);try{let t=await fetch("https://api.scryfall.com/sets/".concat(e)),r=await t.json();if(!r.icon_svg_uri)return i.set(e,null),null;let s=await fetch(r.icon_svg_uri),a=await s.text(),n=a.match(/viewBox="([^"]+)"/i),l=n?n[1]:"0 0 600 600",o=a.matchAll(/<path[^>]*\sd="([^"]+)"/gi),c=[];for(let e of o)e[1]&&c.push(e[1]);if(c.length>0){let t={paths:c,viewBox:l};return i.set(e,t),t}return i.set(e,null),null}catch(t){return console.error("[KeyruneReplacer] 获取 ".concat(e," 失败:"),t),i.set(e,null),null}}let l=new Set;async function o(e){var t;if("true"===e.dataset.replaced||l.has(e)||"true"===e.dataset.setIconManaged)return;let r=e.nextElementSibling;if(r&&"svg"===r.tagName&&"true"===r.dataset.setIcon){e.style.display="none",e.setAttribute("data-replaced","true");return}let s=e.nextElementSibling;s&&"svg"===s.tagName&&"true"===s.dataset.replaced&&(s.remove(),e.style.display="",e.removeAttribute("data-replaced"));let i=Array.from(e.classList),o=i.find(e=>e.startsWith("ss-")&&"ss-fw"!==e&&!e.match(/^ss-(xs|sm|base|lg|xl|2x|3x|4x|common|uncommon|rare|mythic|timeshifted)$/));if(!o)return;let c=o.replace("ss-","").toLowerCase();if(!a.W.includes(c))return;l.add(e);let d=i.find(e=>e.match(/^ss-(common|uncommon|rare|mythic|timeshifted)$/)),m=d?d.replace("ss-",""):null,u=await n(c);if(!u)return void l.delete(e);let h=document.createElementNS("http://www.w3.org/2000/svg","svg"),p=e.className.split(/\s+/).filter(e=>!e.match(/^ss-(?!fw|xs|sm|base|lg|xl|2x|3x|4x|common|uncommon|rare|mythic|timeshifted)/)).join(" ")+" inline-block align-middle";h.setAttribute("class",p.trim()),h.setAttribute("viewBox",u.viewBox);let g=u.viewBox.match(/(\d+(?:\.\d+)?)\s+(\d+(?:\.\d+)?)\s+(\d+(?:\.\d+)?)\s+(\d+(?:\.\d+)?)/),f="1em";if(g){let e=parseFloat(g[3]),t=parseFloat(g[4]);t>0&&(f="".concat(e/t,"em"))}h.setAttribute("style","width: ".concat(f,"; height: 1em; fill: ").concat(m?({common:"#1a1818",uncommon:"#707883",rare:"#a58e4a",mythic:"#bf4427",timeshifted:"#652978"})[m]:"currentColor","; vertical-align: middle;")),h.setAttribute("preserveAspectRatio","xMidYMid meet"),h.setAttribute("aria-hidden","true"),h.setAttribute("data-replaced","true"),u.paths.forEach(e=>{let t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",e),h.appendChild(t)}),e.style.display="none",e.setAttribute("data-replaced","true"),null==(t=e.parentNode)||t.insertBefore(h,e.nextSibling),l.delete(e)}function c(){return(0,s.useEffect)(()=>{setTimeout(()=>{requestAnimationFrame(()=>{document.querySelectorAll("i.keyrune, i.ss").forEach(e=>{e instanceof HTMLElement&&!e.dataset.replaced&&!e.dataset.setIconManaged&&o(e)})})},100);let e=new MutationObserver(e=>{requestAnimationFrame(()=>{e.forEach(e=>{if("attributes"===e.type&&e.target instanceof HTMLElement){let t=e.target;if(t.classList.contains("keyrune")||t.classList.contains("ss")){let e=t.nextElementSibling;e&&"svg"===e.tagName&&("true"===e.dataset.replaced||"true"===e.dataset.setIcon)&&e.remove(),t.style.display="",t.removeAttribute("data-replaced"),t.dataset.setIconManaged||o(t)}}e.addedNodes.forEach(e=>{if(e instanceof HTMLElement){var t;if("svg"===e.tagName&&"true"===e.dataset.setIcon){let t=e.previousElementSibling;t&&(t.classList.contains("keyrune")||t.classList.contains("ss"))&&(t.style.display="none",t.setAttribute("data-replaced","true"));return}if((e.classList.contains("keyrune")||e.classList.contains("ss"))&&!e.dataset.replaced&&!e.dataset.setIconManaged){let t=e.nextElementSibling;if(t&&"svg"===t.tagName&&"true"===t.dataset.setIcon){e.style.display="none",e.setAttribute("data-replaced","true");return}o(e)}null==(t=e.querySelectorAll)||t.call(e,"i.keyrune, i.ss").forEach(e=>{if(e instanceof HTMLElement&&!e.dataset.replaced&&!e.dataset.setIconManaged){let t=e.nextElementSibling;if(t&&"svg"===t.tagName&&"true"===t.dataset.setIcon){e.style.display="none",e.setAttribute("data-replaced","true");return}o(e)}})}})})})});return e.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),()=>{e.disconnect()}},[]),null}},21411:(e,t,r)=>{"use strict";r.d(t,{AnalyticsTracker:()=>c});var s=r(45244),a=r(79283);let i=null,n=["https://api.ipify.org?format=json","https://api.ip.sb/geoip","https://ipapi.co/json/","https://api.myip.com"];async function l(){if(i)return i;for(let e of n)try{let t=await fetch(e),r=await t.json(),s=r.ip||r.query;if(s)return i=s,s}catch(e){continue}return i="unknown","unknown"}async function o(e){try{let t=await l();await fetch("".concat("https://oug155gh.lc-cn-n1-shared.com","/1.1/classes/PageView"),{method:"POST",headers:{"Content-Type":"application/json","X-LC-Id":"ouG155GhmITO8rbIPklBGdVy-gzGzoHsz","X-LC-Key":"tHuCvHWxIKlVoFNGF3V9bOUS"},body:JSON.stringify({page:e,ip:t,userAgent:window.navigator.userAgent,timestamp:{__type:"Date",iso:new Date().toISOString()}})})}catch(e){console.error("Failed to track page view:",e)}}function c(){let e=(0,s.usePathname)();return(0,a.useEffect)(()=>{e&&o(e)},[e]),null}},23661:(e,t,r)=>{"use strict";r.d(t,{W:()=>s});let s=["om1","tla","ecl","tmt"]},30678:()=>{},44745:(e,t,r)=>{"use strict";r.d(t,{Header:()=>D});var s=r(82995),a=r(7531),i=r.n(a),n=r(79283),l=r(15659),o=r(48502);let c=(0,o.A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),d=(0,o.A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function m(){let[e,t]=(0,n.useState)("light");return(0,n.useEffect)(()=>{let e=localStorage.getItem("theme"),r=window.matchMedia("(prefers-color-scheme: dark)").matches,s=e||(r?"dark":"light");t(s),document.documentElement.classList.toggle("dark","dark"===s)},[]),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{let r="light"===e?"dark":"light";t(r),localStorage.setItem("theme",r),document.documentElement.classList.toggle("dark","dark"===r)},className:"w-9 h-9",title:"light"===e?"切换到暗色模式":"切换到亮色模式",children:"light"===e?(0,s.jsx)(c,{className:"h-4 w-4"}):(0,s.jsx)(d,{className:"h-4 w-4"})})}let u=(0,o.A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),h=(0,o.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var p=r(37172),g=r(60955);let f=(0,o.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),x=(0,o.A)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var v=r(9187);let w=(0,o.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var y=r(61692),b=r(91848),k=r(53474);let j=e=>{let{children:t,className:r="",side:a="bottom",onClose:i,asNotification:n=!1,backgroundImage:l}=e;return(0,s.jsx)("div",{className:"\n      rounded-lg bg-[--card] border border-[--border]\n      shadow-lg animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95\n      relative\n      ".concat(!n?"after:absolute after:w-3 after:h-3 \n      after:rotate-45 after:bg-[--card] after:border after:border-[--border]\n      ".concat({top:"after:bottom-[-6px] after:border-b-0 after:border-l-0 after:left-1/2 after:-translate-x-1/2",bottom:"after:top-[-6px] after:border-t-0 after:border-r-0 after:left-1/2 after:-translate-x-1/2",left:"after:right-[-6px] after:border-t-0 after:border-r-0 after:top-1/2 after:-translate-y-1/2",right:"after:left-[-6px] after:border-b-0 after:border-l-0 after:top-1/2 after:-translate-y-1/2"}[a]):"","\n      ").concat(r,"\n    "),children:(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-lg px-4 py-3 text-sm text-[--foreground]",children:[l&&(0,s.jsxs)("div",{className:"absolute inset-0",children:[(0,s.jsx)("div",{className:"absolute inset-0 opacity-[0.3] dark:opacity-[0.3]",style:{backgroundImage:"url(".concat(l,")"),backgroundSize:"cover",backgroundPosition:"center"}}),(0,s.jsx)("div",{className:"absolute inset-0 bg-[--card] opacity-60 dark:opacity-70"})]}),(0,s.jsxs)("div",{className:"relative",children:[i&&(0,s.jsx)("button",{onClick:i,className:"absolute top-0 right-0 w-6 h-6 rounded flex items-center justify-center text-[--muted-foreground] hover:text-[--foreground] transition-colors",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),t]})]})})},N=e=>{let{children:t,content:r,open:a,onOpenChange:i,side:l="bottom",className:o="",showCloseButton:c=!1,asNotification:d=!1,backgroundImage:m}=e,[u,h]=(0,n.useState)(a),[p,g]=(0,n.useState)({top:0,left:0}),[f,x]=(0,n.useState)(l),[v,w]=(0,n.useState)(null),y=(0,n.useRef)(null),b=(0,n.useRef)(null),N=(0,n.useRef)(void 0);(0,n.useEffect)(()=>{void 0!==a&&h(a)},[a]),(0,n.useEffect)(()=>{if(!u||!b.current)return;if(d)return void g({top:window.innerHeight-(b.current.offsetHeight+16),left:window.innerWidth-(b.current.offsetWidth+16)});if(!y.current)return;let e=()=>{if(!y.current||!b.current)return;let e=y.current.getBoundingClientRect();if(0===e.width||0===e.height||e.top>=window.innerHeight||e.bottom<=0||e.left>=window.innerWidth||e.right<=0||"none"===window.getComputedStyle(y.current).display||"hidden"===window.getComputedStyle(y.current).visibility){let t=document.querySelectorAll("[data-next-set-trigger]"),r=null;for(let e of t){let t=e.getBoundingClientRect(),s=window.getComputedStyle(e);if(t.width>0&&t.height>0&&t.top<window.innerHeight&&t.bottom>0&&t.left<window.innerWidth&&t.right>0&&"none"!==s.display&&"hidden"!==s.visibility){r=e;break}}if(!r){h(!1),null==i||i(!1);return}e=r.getBoundingClientRect()}let t=b.current.getBoundingClientRect(),r=0,s=0,a=l,n=window.innerWidth,o=window.innerHeight,c=e.top,d=o-e.bottom;switch("bottom"===l&&d<t.height+8&&c>t.height+8?a="top":"top"===l&&c<t.height+8&&d>t.height+8&&(a="bottom"),a){case"bottom":r=e.bottom+12,s=e.left+(e.width-t.width)/2;break;case"top":r=e.top-t.height-12,s=e.left+(e.width-t.width)/2;break;case"right":r=e.top+(e.height-t.height)/2,s=e.right+12;break;case"left":r=e.top+(e.height-t.height)/2,s=e.left-t.width-12}s<8?s=8:s+t.width>n-8&&(s=n-t.width-8),r<8?r=8:r+t.height>o-8&&(r=o-t.height-8),x(a),g({top:r,left:s})};return e(),window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0)}},[u,l,d,i]);let _=e=>{!d&&(e.nativeEvent instanceof TouchEvent||(w("mouse"),N.current&&clearTimeout(N.current),h(!0),null==i||i(!0)))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:y,onMouseEnter:_,onMouseLeave:e=>{!d&&(e.nativeEvent instanceof TouchEvent||(N.current=setTimeout(()=>{var e;(null==(e=b.current)?void 0:e.matches(":hover"))||(h(!1),null==i||i(!1))},100)))},onClick:e=>{(e.nativeEvent instanceof TouchEvent||d)&&(w("touch"),h(!u),null==i||i(!u))},children:t}),u&&(0,k.createPortal)((0,s.jsx)("div",{ref:b,style:{position:"fixed",top:p.top,left:p.left,zIndex:9999},className:o,onMouseEnter:_,onMouseLeave:e=>{!d&&(e.nativeEvent instanceof TouchEvent||(h(!1),null==i||i(!1)))},children:(0,s.jsx)(j,{side:f,onClose:c?()=>{h(!1),null==i||i(!1)}:void 0,asNotification:d||"touch"===v,backgroundImage:m,children:r})}),document.body)]})};var _=r(76138),E=r(23692);function S(e){let t=e.includes("~")?"约":"",r=(0,_.H)(e.replace("~",""));return(0,E.f)(r)?t+new Intl.DateTimeFormat("zh-CN",{month:"long",day:"numeric"}).format(r):(console.error("Invalid date string passed to formatDate: ".concat(e)),"无效日期")}function A(e){var t,r,a,i,l;let{className:o=""}=e,{current:c,next:d}=function(){let e=new Date,t=y.c.sort((e,t)=>{let r=(0,_.H)(e.releaseDate.replace("~","")),s=(0,_.H)(t.releaseDate.replace("~",""));return((0,E.f)(r)?r.getTime():-1/0)-((0,E.f)(s)?s.getTime():1/0)}),r=null,s=null;for(let a=t.length-1;a>=0;a--){let i=t[a],n=(0,_.H)(i.releaseDate.replace("~",""));if((0,E.f)(n)&&n<=e){r=i,s=t[a+1]||null;break}}return{current:r,next:s}}(),[m,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let e=localStorage.getItem("previewTooltipLastShown"),t=new Date().getTime();(!e||t-parseInt(e)>432e6)&&(null==d?void 0:d.preview)&&(p(!0),localStorage.setItem("previewTooltipLastShown",t.toString()))},[d]),(0,n.useEffect)(()=>{let e=()=>f(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),c)?(0,s.jsx)("div",{className:"flex items-center gap-4 px-3 py-1.5 text-sm text-[--muted-foreground] ".concat(o),children:(0,s.jsxs)("div",{className:"grid md:flex grid-cols-2 w-full md:w-auto gap-4 md:gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 min-w-0",children:[(0,s.jsx)("i",{className:"ss ss-".concat(c.code.toLowerCase()," ss-fw flex-shrink-0")}),(0,s.jsxs)("span",{className:"break-words",children:["最新系列：",c.name]})]}),d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hidden md:block w-px h-4 bg-[--border]"}),d.preview?(0,s.jsx)(N,{open:m,onOpenChange:p,side:"top",showCloseButton:!0,asNotification:g,backgroundImage:d.preview.backgroundImage,content:(0,s.jsxs)("div",{className:"w-[320px] space-y-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("h3",{className:"font-medium text-[--foreground] flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-[13px] text-[--muted-foreground]",children:"新系列："}),(0,s.jsx)("i",{className:"ss ss-".concat(d.code.toLowerCase()," ss-2x opacity-80 flex-shrink-0")}),d.name,d.wikiUrl&&(0,s.jsxs)("a",{href:d.wikiUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-[13px] text-[--primary] hover:text-[--primary]/80 transition-colors",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(u,{className:"w-3.5 h-3.5"}),(0,s.jsx)("span",{children:"MTG Wiki"})]})]})}),(0,s.jsx)("p",{className:"text-sm leading-relaxed",children:(null==(t=d.preview)?void 0:t.title)&&(null==(r=d.preview)?void 0:r.description)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-[--foreground]",children:d.preview.title}),(0,s.jsx)("span",{className:"mx-2 text-[--muted-foreground] opacity-30",children:"|"}),(0,s.jsx)("span",{className:"text-[--muted-foreground]",children:d.preview.description})]})})]})}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("p",{className:"text-[13px] text-[--muted-foreground] opacity-90",children:["前往以下网站，了解",d.name,"最新预览卡牌"]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:null==(a=d.preview)?void 0:a.links.map((e,t)=>(0,s.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-[13px] text-[--primary] hover:text-[--primary]/80 transition-colors",children:[(0,s.jsx)(u,{className:"w-3.5 h-3.5 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:e.name})]},t))})]}),(null==(i=d.preview)?void 0:i.digitalName)&&(null==(l=d.preview)?void 0:l.digitalLinks)&&(0,s.jsxs)("div",{className:"space-y-1.5 pt-2 border-t border-[--border]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-[13px] text-[--muted-foreground] opacity-90",children:"线上替代系列："}),d.preview.digitalCode&&(0,s.jsx)("i",{className:"ss ss-".concat(d.preview.digitalCode.toLowerCase()," ss-fw flex-shrink-0")}),(0,s.jsx)("span",{className:"text-[13px] font-medium text-[--foreground]",children:d.preview.digitalName})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:d.preview.digitalLinks.map((e,t)=>(0,s.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-[13px] text-[--primary] hover:text-[--primary]/80 transition-colors",children:[(0,s.jsx)(u,{className:"w-3.5 h-3.5 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:e.name})]},"digital-".concat(t)))})]})]}),children:(0,s.jsxs)("span",{className:"flex items-center gap-1.5 cursor-help min-w-0","data-next-set-trigger":!0,children:[(0,s.jsx)(h,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsxs)("span",{className:"break-words",children:["下个系列：",d.name,"（",S(d.releaseDate),"）",(0,s.jsx)("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 text-xs border border-[--primary] text-[--primary] rounded ml-1",children:"预览"})]})]})}):(0,s.jsxs)("span",{className:"flex items-center gap-1.5 min-w-0",children:[(0,s.jsx)(h,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsxs)("span",{className:"break-words",children:["下个系列：",d.name,"（",S(d.releaseDate),"）"]})]})]})]})}):null}function M(e){let{className:t=""}=e,{data:r,isLoading:a,error:l,fetchStatus:o}=(0,b.Xk)();if((0,n.useEffect)(()=>{o();let e=setInterval(()=>o(),6e4);return()=>clearInterval(e)},[o]),a)return(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 text-sm ".concat(t),children:[(0,s.jsx)(p.A,{className:"w-4 h-4 animate-pulse text-[--muted-foreground]"}),(0,s.jsx)("span",{className:"text-[--muted-foreground] md:inline hidden",children:"MTGA服务："}),(0,s.jsx)("span",{className:"text-[--muted-foreground]",children:"检查中..."})]});if(l||!r)return null;let c={none:"text-emerald-500",minor:"text-yellow-500",major:"text-orange-500",critical:"text-red-500",maintenance:"text-blue-500"},d="none"!==r.status.indicator?"animate-pulse":"",m=r.scheduled_maintenances.length>0,u=m?r.scheduled_maintenances[0]:null,h=(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(p.A,{className:"w-4 h-4 ".concat(c[r.status.indicator]," ").concat(d)}),(0,s.jsx)("span",{className:"text-[--muted-foreground] md:inline hidden",children:"MTGA服务："}),(0,s.jsx)("span",{className:c[r.status.indicator],children:m&&"none"===r.status.indicator?"计划维护":({none:"正常",minor:"轻微问题",major:"重要问题",critical:"严重问题",maintenance:"维护中"})[r.status.indicator]})]});if(m&&u){let e=(0,_.H)(u.scheduled_for),r=(0,_.H)(u.scheduled_until),a=e=>(0,E.f)(e)?new Intl.DateTimeFormat("zh-CN",{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}).format(e):"无效时间";return(0,s.jsx)(N,{content:(0,s.jsxs)("div",{className:"w-[320px] space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"w-5 h-5 text-blue-500"}),(0,s.jsx)("h3",{className:"font-medium text-[--foreground]",children:u.name})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-[--muted-foreground]",children:[(0,s.jsxs)("div",{children:["开始时间：",a(e)]}),(0,s.jsxs)("div",{children:["结束时间：",a(r)]})]}),u.incident_updates.length>0&&(0,s.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:u.incident_updates[0].body})]}),side:"bottom",children:(0,s.jsx)(i(),{href:"/status",className:"flex items-center gap-1.5 px-3 py-1.5 text-sm hover:opacity-80 transition-opacity ".concat(t),children:h})})}return(0,s.jsx)(i(),{href:"/status",className:"flex items-center gap-1.5 px-3 py-1.5 text-sm hover:opacity-80 transition-opacity ".concat(t),children:h})}let q=[{label:"轮抽数据",children:[{label:"卡牌数据",href:"/cards"},{label:"赛制速度",href:"/speed"},{label:"色组数据",href:"https://www.17lands.com/deck_color_data",external:!0}]},{label:"万智日程",children:[{label:"MTGA活动日历",href:"/calendar"},{label:"标准轮替日程",href:"/rotation"},{label:"MTGA服务状态",href:"/status"},{label:"炼金系列预览",href:"/previews"}]},{label:"其他工具",children:[{label:"MTGA汉化MOD",href:"/mod"},{label:"Scryfall汉化脚本",href:"/script"},{label:"抽卡概率计算器",href:"/hypergeometric"},{label:"精研通行证计算器",href:"/mastery"},{label:"开包模拟器",href:"/simulator"}]},{label:"关于",href:"/about"}];function L(e){let{item:t,onClose:r}=e,[a,l]=(0,n.useState)(!1);return t.children?(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{className:"flex items-center justify-between w-full px-4 py-2 text-[--foreground-muted] hover:text-[--foreground]",onClick:()=>l(!a),children:[t.label,(0,s.jsx)(g.A,{className:"h-4 w-4 transition-transform ".concat(a?"rotate-180":"")})]}),a&&(0,s.jsx)("div",{className:"pl-4 space-y-1 border-l border-[--border] ml-4",children:t.children.map((e,t)=>e.external?(0,s.jsxs)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-4 py-2 text-[--foreground-muted] hover:text-[--foreground]",onClick:r,children:[e.label,(0,s.jsx)(u,{className:"h-3 w-3"})]},t):(0,s.jsx)(i(),{href:e.href,className:"block px-4 py-2 text-[--foreground-muted] hover:text-[--foreground]",onClick:r,children:e.label},t))})]}):(0,s.jsx)(i(),{href:t.href,className:"block px-4 py-2 text-[--foreground-muted] hover:text-[--foreground]",onClick:r,children:t.label})}function C(e){let{item:t}=e;return t.children?(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)("button",{className:"flex items-center gap-1 text-[--foreground-muted] group-hover:text-[--foreground]",children:[t.label,(0,s.jsx)(g.A,{className:"h-4 w-4"})]}),(0,s.jsx)("div",{className:"absolute left-0 top-[calc(100%-0.25rem)] pt-2 invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-[opacity] duration-150",children:(0,s.jsx)("div",{className:"py-2 bg-[--card] rounded-lg border border-[--border] shadow-lg min-w-[160px]",children:t.children.map((e,t)=>e.external?(0,s.jsxs)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-4 py-2 text-[--foreground-muted] hover:text-[--foreground] hover:bg-[--accent]",children:[e.label,(0,s.jsx)(u,{className:"h-3 w-3"})]},t):(0,s.jsx)(i(),{href:e.href,className:"block px-4 py-2 text-[--foreground-muted] hover:text-[--foreground] hover:bg-[--accent]",children:e.label},t))})})]}):(0,s.jsx)(i(),{href:t.href,className:"text-[--foreground-muted] hover:text-[--foreground]",children:t.label})}function D(){let[e,t]=(0,n.useState)(!1),{isInstallable:r,install:a}=function(){let[e,t]=(0,n.useState)(null),[r,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=e=>{e.preventDefault(),t(e),s(!0)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),{isInstallable:r,install:async()=>{if(!e)return;e.prompt();let{outcome:r}=await e.userChoice;"accepted"===r&&(t(null),s(!1))}}}();return(0,n.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),(0,s.jsxs)("header",{className:"sticky top-0 z-50 border-b border-[--border] bg-[--background]",children:[(0,s.jsxs)("div",{className:"container mx-auto",children:[(0,s.jsxs)("div",{className:"flex h-16 md:h-8 2xl:h-16 items-center justify-between px-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 min-w-0",children:[(0,s.jsx)(i(),{href:"/",className:"font-semibold text-[--foreground] whitespace-nowrap",children:"十七地"}),(0,s.jsx)(M,{className:"md:hidden"})]}),(0,s.jsx)("nav",{className:"hidden md:flex items-center space-x-6 text-sm",children:q.map((e,t)=>(0,s.jsx)(C,{item:e},t))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(A,{className:"hidden 2xl:flex"}),(0,s.jsx)("div",{className:"w-px h-4 bg-[--border] hidden 2xl:flex"}),(0,s.jsx)(M,{className:"hidden 2xl:flex"}),r&&(0,s.jsx)("button",{onClick:a,className:"text-[--foreground-muted] hover:text-[--foreground] transition-colors",title:"安装应用",children:(0,s.jsx)(f,{className:"h-5 w-5"})}),(0,s.jsx)("a",{href:"https://space.bilibili.com/271023",target:"_blank",rel:"noopener noreferrer",className:"text-[--foreground-muted] hover:text-[--foreground] transition-colors",title:"B站主页",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:(0,s.jsx)("path",{d:"M17.813 4.653h.854c1.51.054 2.769.578 3.773 1.574 1.004.995 1.524 2.249 1.56 3.76v7.36c-.036 1.51-.556 2.769-1.56 3.773s-2.262 1.524-3.773 1.56H5.333c-1.51-.036-2.769-.556-3.773-1.56S.036 18.858 0 17.347v-7.36c.036-1.511.556-2.765 1.56-3.76 1.004-.996 2.262-1.52 3.773-1.574h.774l-1.174-1.12a1.234 1.234 0 0 1-.373-.906c0-.356.124-.658.373-.907l.027-.027c.267-.249.573-.373.92-.373.347 0 .653.124.92.373L9.653 4.44c.071.071.134.142.187.213h4.267a.836.836 0 0 1 .16-.213l2.853-2.747c.267-.249.573-.373.92-.373.347 0 .662.151.929.4.267.249.391.551.391.907 0 .355-.124.657-.373.906zM5.333 7.24c-.746.018-1.373.276-1.88.773-.506.498-.769 1.13-.786 1.894v7.52c.017.764.28 1.395.786 1.893.507.498 1.134.756 1.88.773h13.334c.746-.017 1.373-.275 1.88-.773.506-.498.769-1.129.786-1.893v-7.52c-.017-.765-.28-1.396-.786-1.894-.507-.497-1.134-.755-1.88-.773zM8 11.107c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c0-.373.129-.689.386-.947.258-.257.574-.386.947-.386zm8 0c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c.017-.391.15-.711.4-.96.249-.249.56-.373.933-.373Z"})})}),(0,s.jsx)("a",{href:"https://github.com/lieyanqzu/shiqidi",target:"_blank",rel:"noopener noreferrer",className:"text-[--foreground-muted] hover:text-[--foreground] transition-colors",title:"GitHub仓库",children:(0,s.jsx)(x,{className:"h-5 w-5"})}),(0,s.jsx)(m,{}),(0,s.jsx)("button",{className:"md:hidden p-1 text-[--foreground-muted] hover:text-[--foreground]",onClick:()=>t(!e),children:e?(0,s.jsx)(v.A,{className:"h-6 w-6"}):(0,s.jsx)(w,{className:"h-6 w-6"})})]})]}),(0,s.jsxs)("div",{className:"hidden md:flex 2xl:hidden items-center justify-between border-t border-[--border] px-4",children:[(0,s.jsx)(A,{}),(0,s.jsx)(M,{})]})]}),e&&(0,s.jsx)("div",{className:"fixed inset-0 top-16 bg-[--background] z-40 md:hidden",children:(0,s.jsxs)("nav",{className:"container mx-auto px-4 py-4",children:[(0,s.jsx)("div",{className:"space-y-4 mb-6",children:(0,s.jsx)(A,{})}),(0,s.jsx)("div",{className:"space-y-1",children:q.map((e,r)=>(0,s.jsx)(L,{item:e,onClose:()=>t(!1)},r))})]})})]})}},46962:()=>{},61692:e=>{"use strict";e.exports=JSON.parse('{"c":[{"name":"万智牌：基石构筑","code":"FDN","releaseDate":"2024-11-13"},{"name":"先驱大师","code":"PIO","releaseDate":"2024-12-11"},{"name":"乙太飘移","code":"DFT","releaseDate":"2025-02-12","wikiUrl":"https://mtg.wiki/page/Aetherdrift?utm_source=shiqidi","preview":{"title":"扣紧护带","description":"甩开对手！上车加入乙太飘移，参与这场跨越三个时空、让肾上腺素飙升的多重宇宙竞速赛。","backgroundImage":"/image/background/DFT_sma_key_1920x1080_en.jpg","links":[{"name":"大学院废墟（中文）","url":"https://mtgch.com/previews/DFT?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/products/aetherdrift/card-image-gallery"},{"name":"Scryfall","url":"https://scryfall.com/sets/dft?order=spoiled&utm_source=shiqidi"},{"name":"Untapped.gg","url":"https://mtga.untapped.gg/codex/spoilers/aetherdrift?sortBy=spoilerDate&utm_source=shiqidi"}]}},{"name":"炼金：乙太飘移","code":"YDFT","releaseDate":"2025-03-05","wikiUrl":"https://mtg.wiki/page/Alchemy:_Aetherdrift?utm_source=shiqidi","preview":{"title":"炼金预览","description":"最新炼金系列将于2025年3月5日上线万智牌：竞技场，即日起开始预览。","links":[{"name":"十七地（中文）","url":"/previews/ydft"},{"name":"Scryfall","url":"https://scryfall.com/sets/ydft?order=spoiled&utm_source=shiqidi"}]}},{"name":"鞑契龙岚录","code":"TDM","releaseDate":"2025-04-09","wikiUrl":"https://mtg.wiki/page/Tarkir:_Dragonstorm?utm_source=shiqidi","preview":{"title":"冲破风暴","description":"鞑契比以往更大更狂放，其中满是电影化的行动、充满活力的部落特色，还有强力的新龙，可以成为加入你收藏的持久火力。","backgroundImage":"/image/background/TDM_sma_key_1920x1080_en.jpg","links":[{"name":"大学院废墟（中文）","url":"https://mtgch.com/previews/TDM?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/products/tarkir-dragonstorm/card-image-gallery"},{"name":"Scryfall","url":"https://scryfall.com/sets/tdm?order=spoiled&utm_source=shiqidi"},{"name":"Untapped.gg","url":"https://mtga.untapped.gg/codex/sets/tarkir-dragonstorm?sortBy=spoilerDate&utm_source=shiqidi"}]}},{"name":"炼金：鞑契","code":"YTDM","releaseDate":"2025-04-30","wikiUrl":"https://mtg.wiki/page/Alchemy:_Tarkir?utm_source=shiqidi","preview":{"title":"炼金预览","description":"最新炼金系列将于2025年4月30日上线万智牌：竞技场，即日起开始预览。","links":[{"name":"十七地（中文）","url":"/previews/ytdm"},{"name":"Scryfall","url":"https://scryfall.com/sets/ytdm?order=spoiled&utm_source=shiqidi"}]}},{"name":"万智牌～最终幻想","code":"FIN","releaseDate":"2025-06-11","wikiUrl":"https://mtg.wiki/page/Final_Fantasy?utm_source=shiqidi","preview":{"title":"史诗聚集于此","description":"施放强大的咒语，唤出经典的召唤兽，还可以乘在陆行鸟背上前往你最爱的地方。用数不胜数的原游戏的元素来创造你自己的故事！","backgroundImage":"/image/background/FIN_sma_key_1920x1080.jpg","links":[{"name":"大学院废墟（中文）","url":"https://mtgch.com/previews/FIN/?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/products/final-fantasy/card-image-gallery"},{"name":"Scryfall","url":"https://scryfall.com/sets/fin?order=spoiled&utm_source=shiqidi"},{"name":"Untapped.gg","url":"https://mtga.untapped.gg/codex/sets/final-fantasy?sortBy=spoilerDate&utm_source=shiqidi"}]}},{"name":"虚空边域","code":"EOE","releaseDate":"2025-07-30","wikiUrl":"https://mtg.wiki/page/Edge_of_Eternities?utm_source=shiqidi","preview":{"title":"于群星间寻找魔法","description":"加速驶入万智牌的太空幻想系列！绘制航线，穿行于索瑟拉星系，探索遥远的行星，使用炫目的魔法，和各种陌生派系开战。","backgroundImage":"/image/background/EOE_sma_key_1920x1080_en.jpg","links":[{"name":"大学院废墟（中文）","url":"https://mtgch.com/previews/EOE/?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/products/edge-of-eternities/card-image-gallery"},{"name":"Scryfall","url":"https://scryfall.com/sets/eoe?order=spoiled&utm_source=shiqidi"},{"name":"Untapped.gg","url":"https://mtga.untapped.gg/codex/sets/edge-of-eternities?sortBy=spoilerDate&utm_source=shiqidi"}]}},{"name":"炼金：虚空边域","code":"YEOE","releaseDate":"2025-08-20","wikiUrl":"https://mtg.wiki/page/Alchemy:_Edge_of_Eternities?utm_source=shiqidi","preview":{"title":"炼金预览","description":"最新炼金系列将于2025年8月20日上线万智牌：竞技场，即日起开始预览。","links":[{"name":"十七地（中文）","url":"/previews/yeoe"},{"name":"Scryfall","url":"https://scryfall.com/sets/yeoe?order=spoiled&utm_source=shiqidi"}]}},{"name":"漫威的蜘蛛侠","code":"SPM","releaseDate":"2025-09-24","wikiUrl":"https://mtg.wiki/page/Marvel%27s_Spider-Man?utm_source=shiqidi","preview":{"title":"友好。超凡。神奇。","description":"咻的一下进入我们的新系列！万智牌 | 漫威的蜘蛛侠从整个蜘蛛侠宇宙将牌张射入你最爱的套牌。","backgroundImage":"/image/background/SPM_sma_key_1920x1080_en.jpg","links":[{"name":"大学院废墟（中文）","url":"https://mtgch.com/previews/SPM/?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/products/marvel/spider-man/card-image-gallery"},{"name":"Scryfall","url":"https://scryfall.com/sets/spm?order=spoiled&utm_source=shiqidi"},{"name":"Untapped.gg","url":"https://mtga.untapped.gg/codex/sets/marvels-spider-man?sortBy=spoilerDate&utm_source=shiqidi"}],"digitalName":"穿越预兆路","digitalCode":"OM1","digitalLinks":[{"name":"大学院废墟（中文）","url":"https://mtgch.com/previews/OM1/?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/mtgarena/through-the-omenpaths/card-image-gallery"}]}},{"name":"降世神通：最后的气宗","code":"TLA","releaseDate":"2025-11-19","wikiUrl":"https://mtg.wiki/page/Avatar:_The_Last_Airbender?utm_source=shiqidi","preview":{"title":"掌控元素","description":"使用降世神通：最后的气宗的万智牌牌张驾驭战场！掌控元素，和喜爱的角色一起开始新冒险，欣赏经典插画以及前所未有的元素对抗。","backgroundImage":"/image/background/TLA_sma_key_1920x1080_EN.jpg","links":[{"name":"大学院废墟（中文）","url":"https://mtgch.com/set/TLA/?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/products/avatar-the-last-airbender/card-image-gallery"},{"name":"Scryfall","url":"https://scryfall.com/sets/tla?order=spoiled&utm_source=shiqidi"},{"name":"Untapped.gg","url":"https://mtga.untapped.gg/codex/sets/avatar-the-last-airbender?sortBy=spoilerDate&utm_source=shiqidi"}]}},{"name":"洛温：暗影笼罩","code":"ECL","releaseDate":"2026-01-21","wikiUrl":"https://mtg.wiki/page/Lorwyn_Eclipsed?utm_source=shiqidi"}]}')},71680:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,30678,23)),Promise.resolve().then(r.bind(r,21411)),Promise.resolve().then(r.bind(r,44745)),Promise.resolve().then(r.bind(r,19890)),Promise.resolve().then(r.t.bind(r,97045,23)),Promise.resolve().then(r.t.bind(r,46962,23)),Promise.resolve().then(r.t.bind(r,84581,23))},84581:()=>{},97045:()=>{}},e=>{e.O(0,[361,894,531,391,848,451,75,358],()=>e(e.s=71680)),_N_E=e.O()}]);