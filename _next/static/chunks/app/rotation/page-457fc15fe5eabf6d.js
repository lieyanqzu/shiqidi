(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{5111:(e,t,s)=>{"use strict";s.d(t,{Content:()=>i});var a=s(14994),r=s(83802),n=s(80707);function l(e,t){if(e){let t=new Date(e);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"long",day:"numeric"}).format(t)}return t||"待定"}function c(e,t){if(!e&&!t)return"待定";let s=e?new Date(e):null;if(!s)return t||"待定";let a=new Date,r=Math.ceil((s.getTime()-a.getTime())/864e5);if(r<0)return"已过期";if(0===r)return"今天";if(1===r)return"明天";if(r<=30)return"".concat(r,"天后");let n=Math.floor(r/30);if(n<12)return"".concat(n,"个月后");let l=Math.floor(n/12),c=n%12;return 0===c?"".concat(l,"年后"):"".concat(l,"年").concat(c,"个月后")}function d(e){let{className:t=""}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3 ".concat(t),children:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.25 5.5a.75.75 0 0 0-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 0 0 .75-.75v-4a.75.75 0 0 1 1.5 0v4A2.25 2.25 0 0 1 12.75 17h-8.5A2.25 2.25 0 0 1 2 14.75v-8.5A2.25 2.25 0 0 1 4.25 4h5a.75.75 0 0 1 0 1.5h-5Z",clipRule:"evenodd"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M6.194 12.753a.75.75 0 0 0 1.06.053L16.5 4.44v2.81a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.553l-9.056 8.194a.75.75 0 0 0-.053 1.06Z",clipRule:"evenodd"})]})}function i(e){let{currentSetGroups:t,futureSets:s,recentBans:i}=e,{chineseSetNames:o,fetchChineseSetNames:m}=(0,n.LJ)();return(0,r.useEffect)(()=>{m()},[m]),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"标准轮替日程"}),(0,a.jsx)("div",{className:"bg-[--card] rounded-lg p-4 mb-8",children:(0,a.jsx)("p",{className:"text-sm text-[--muted-foreground] leading-relaxed",children:"标准赛制中，最近三年内发行的正式系列都可以使用。2027年起，每年新系列发售时，超过三年的系列将会轮替出标准赛制。"})}),(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"当前标准系列"}),(0,a.jsx)("div",{className:"space-y-8",children:t.map((e,t)=>{let s=0===t,r=c(e.exitDate,e.roughExitDate),n=!(r.includes("个月后")||r.includes("年后"))&&!r.includes("已过期"),i=s?{border:"border-emerald-500",bg:"bg-emerald-500/10",text:"text-emerald-500",dot:"bg-emerald-500",badge:{bg:"bg-emerald-400/10",text:"text-emerald-500",ring:"ring-emerald-400/30"}}:{border:n?"border-yellow-500":"border-transparent",bg:n?"bg-yellow-500/10":"bg-[--accent]",text:n?"text-yellow-500":"text-[--muted-foreground]",dot:n?"bg-yellow-500":"bg-[--muted-foreground]",badge:{bg:"bg-yellow-400/10",text:"text-yellow-500",ring:"ring-yellow-400/30"}};return(0,a.jsxs)("div",{className:"bg-[--card] rounded-lg overflow-hidden border-2 transition-colors ".concat(i.border),children:[(0,a.jsxs)("div",{className:"px-4 py-3 flex justify-between items-center ".concat(i.bg),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(i.dot," ").concat(n||s?"animate-pulse":"")}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:[l(e.exitDate,e.roughExitDate)," 轮替"]}),s&&(0,a.jsx)("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium\n                        ".concat(i.badge.bg," ").concat(i.badge.text," ring-1 ring-inset ").concat(i.badge.ring),children:"下一轮替"})]}),(0,a.jsx)("div",{className:"text-sm font-medium ".concat(i.text),children:function(e){var t,s;let a=e.map(e=>e.enter_date).filter(e=>null!==e).map(e=>new Date(e));if(0===a.length)return"";let r=new Date(Math.min(...a.map(e=>e.getTime()))),n=e[0].exit_date?new Date(e[0].exit_date):null,l=r.getFullYear(),c=n?n.getFullYear():(null===(s=e[0].rough_exit_date)||void 0===s?void 0:null===(t=s.match(/\d{4}/))||void 0===t?void 0:t[0])||"";return"".concat(l,"–").concat(c)}(e.sets)})]}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"space-y-3",children:e.sets.map(e=>(0,a.jsx)("div",{className:"border border-[--border] rounded-lg p-4 group",children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("h3",{className:"font-medium text-[--foreground] flex items-center gap-1",children:[(0,a.jsx)("a",{href:e.code?"https://www.sbwsz.com/set/".concat(e.code,"?utm_source=shiqidi"):"#",target:"_blank",rel:"noopener noreferrer",className:"text-[--foreground] ".concat(e.code?"hover:opacity-70 transition-opacity":""),children:e.code&&o[e.code]?o[e.code]:e.name}),e.code&&(0,a.jsx)(d,{className:"opacity-0 group-hover:opacity-50 transition-opacity"})]})}),(0,a.jsxs)("div",{className:"text-sm text-[--muted-foreground] mt-1 flex items-center gap-1.5",children:[e.code&&(0,a.jsx)("i",{className:"ss ss-".concat(e.code.toLowerCase()," ss-fw")}),(0,a.jsx)("span",{children:e.code})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-sm text-[--muted-foreground] whitespace-nowrap",children:[l(e.enter_date,e.rough_enter_date)," 发售"]})})]})})},e.code))})})]},t)})})]}),s.length>0&&(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"即将发售"}),(0,a.jsx)("div",{className:"bg-[--card] rounded-lg p-4",children:(0,a.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>(0,a.jsx)("div",{className:"border border-[--border] rounded-lg p-4 group",children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("h3",{className:"font-medium text-[--foreground] flex items-center gap-1",children:[(0,a.jsx)("a",{href:e.code?"https://www.sbwsz.com/set/".concat(e.code,"?utm_source=shiqidi"):"#",target:"_blank",rel:"noopener noreferrer",className:"text-[--foreground] ".concat(e.code?"hover:opacity-70 transition-opacity":""),children:e.code&&o[e.code]?o[e.code]:e.name||e.codename||"未知系列"}),e.code&&(0,a.jsx)(d,{className:"opacity-0 group-hover:opacity-50 transition-opacity"})]})}),e.code&&(0,a.jsxs)("div",{className:"text-sm text-[--muted-foreground] mt-1 flex items-center gap-1.5",children:[(0,a.jsx)("i",{className:"ss ss-".concat(e.code.toLowerCase()," ss-fw")}),(0,a.jsx)("span",{children:e.code})]})]}),(0,a.jsxs)("div",{className:"text-right flex flex-col items-end gap-2",children:[(0,a.jsxs)("div",{className:"text-sm text-[--muted-foreground] whitespace-nowrap",children:[l(e.enter_date,e.rough_enter_date)," 发售"]}),(0,a.jsx)("div",{className:"text-sm text-[--muted-foreground] mt-1",children:c(e.enter_date,e.rough_enter_date)})]})]})})},e.code||t))})})]}),i.length>0&&(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"最近禁牌"}),(0,a.jsx)("div",{className:"bg-[--card] rounded-lg p-4",children:(0,a.jsx)("div",{className:"space-y-3",children:i.map((e,t)=>(0,a.jsx)("div",{className:"border border-[--border] rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-[--foreground]",children:e.card_name}),(0,a.jsxs)("div",{className:"text-sm text-[--muted-foreground] mt-1 flex items-center gap-1.5",children:[(0,a.jsx)("i",{className:"ss ss-".concat(e.set_code.toLowerCase()," ss-fw")}),(0,a.jsx)("span",{children:o[e.set_code]||e.set_code})]}),(0,a.jsx)("div",{className:"text-sm text-[--muted-foreground] mt-2",children:e.reason})]}),e.announcement_url&&(0,a.jsx)("a",{href:"".concat(e.announcement_url).concat(e.announcement_url.includes("?")?"&":"?","utm_source=shiqidi"),target:"_blank",rel:"noopener noreferrer",className:"text-sm text-[--primary] hover:underline",children:"公告"})]})},t))})})]})]})}},40907:(e,t,s)=>{"use strict";s.d(t,{v:()=>d});var a=s(83802);let r=e=>{let t;let s=new Set,a=(e,a)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,n={setState:a,getState:r,getInitialState:()=>l,subscribe:e=>(s.add(e),()=>s.delete(e))},l=t=e(a,r,n);return n},n=e=>e?r(e):r,l=e=>e,c=e=>{let t=n(e),s=e=>(function(e,t=l){let s=a.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return a.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},d=e=>e?c(e):c},54236:(e,t,s)=>{Promise.resolve().then(s.bind(s,5111))},80707:(e,t,s)=>{"use strict";s.d(t,{xp:()=>n,LJ:()=>c,Xk:()=>l});var a=s(40907);let r=new Date().toISOString().split("T")[0],n=(0,a.v)(e=>({cards:[],chineseCards:{},params:{expansion:"TDM",format:"PremierDraft",start_date:"2016-01-01",end_date:r},isLoading:!1,error:null,setCards:t=>e({cards:t}),setChineseCards:t=>e(e=>{let s={...e.chineseCards};return t.forEach(e=>{s[e.name]=e,e.faceName&&(s[e.faceName]=e)}),{chineseCards:s}}),setParams:t=>e(e=>({params:{...e.params,...t}})),setIsLoading:t=>e({isLoading:t}),setError:t=>e({error:t})})),l=(0,a.v)((e,t)=>({data:null,isLoading:!1,error:null,lastUpdated:null,fetchStatus:async function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t(),r=Date.now();if(s||!a.data||!a.lastUpdated||!(r-a.lastUpdated<6e4)){e({isLoading:!0});try{let t=await fetch("https://magicthegatheringarena.statuspage.io/api/v2/summary.json");if(!t.ok)throw Error("获取状态信息失败");let s=await t.json();e({data:s,error:null,lastUpdated:r})}catch(t){e({error:t instanceof Error?t.message:"未知错误",data:null})}finally{e({isLoading:!1})}}}})),c=(0,a.v)(e=>({chineseSetNames:{},isLoading:!1,error:null,hasLoaded:!1,fetchChineseSetNames:async()=>{let t=c.getState();if(!t.hasLoaded&&!t.isLoading)try{e({isLoading:!0});let t=await fetch("https://sbwsz.com/static/setName.json");if(!t.ok)throw Error("获取系列中文名称失败");let s=await t.json();e({chineseSetNames:s,error:null,hasLoaded:!0})}catch(t){e({error:t instanceof Error?t:Error("获取系列中文名称失败")})}finally{e({isLoading:!1})}}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[758,205,358],()=>t(54236)),_N_E=e.O()}]);