(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[746],{25852:(e,a,l)=>{"use strict";l.d(a,{$:()=>s});var t=l(47210);function s(e){let{variant:a="primary",size:l="md",className:s,...r}=e;return(0,t.jsx)("button",{className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[--primary]"," ").concat({primary:"bg-[--primary] text-[--primary-foreground] hover:brightness-110 active:scale-[0.98]",secondary:"bg-[--background-subtle] text-[--foreground] hover:brightness-95 active:scale-[0.98]",ghost:"bg-transparent text-[--foreground-muted] hover:bg-[--background-subtle] hover:text-[--foreground] active:scale-[0.98]"}[a]," ").concat({sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",icon:"h-9 w-9 p-0"}[l]," ").concat(s),...r})}},26398:(e,a,l)=>{"use strict";l.d(a,{U:()=>s});var t=l(63650);function s(e){let[a,l]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let a=window.matchMedia(e);l(a.matches);let t=e=>{l(e.matches)};return a.addEventListener("change",t),()=>{a.removeEventListener("change",t)}},[e]),a}},30620:(e,a,l)=>{"use strict";l.d(a,{l:()=>s});var t=l(47210);function s(e){let{label:a,error:l,options:s,className:r,...n}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[a&&(0,t.jsx)("label",{className:"text-sm font-medium text-[--component-foreground]",children:a}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("select",{className:"\n            w-full rounded-md border border-[--border] bg-[--component-background] px-3 pr-10 py-2 text-sm text-[--component-foreground]\n            appearance-none\n            focus:border-[--primary] focus:outline-none focus:ring-1 focus:ring-[--primary]\n            disabled:cursor-not-allowed disabled:opacity-50\n            ".concat(r,"\n          "),...n,children:s.map(e=>(0,t.jsx)("option",{value:e.value,className:"bg-[--component-background]",children:e.label},e.value))}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2",children:(0,t.jsx)("svg",{className:"h-4 w-4 fill-current text-[--component-foreground-muted]",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:l})]})}},32576:(e,a,l)=>{"use strict";l.d(a,{p:()=>s});var t=l(47210);function s(e){let{label:a,error:l,className:s,readOnly:r,...n}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[a&&(0,t.jsx)("label",{className:"text-sm font-medium text-[--component-foreground]",children:a}),(0,t.jsx)("input",{className:"\n          w-full rounded-md border border-[--border] bg-[--component-background] px-3 py-2 text-sm text-[--component-foreground]\n          placeholder:text-[--component-foreground-muted]\n          focus:border-[--primary] focus:outline-none focus:ring-1 focus:ring-[--primary]\n          disabled:cursor-not-allowed disabled:opacity-50\n          ".concat(r?"focus:ring-0 focus:border-[--border] cursor-default":"","\n          ").concat(s,"\n        "),readOnly:r,...n}),l&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:l})]})}},70015:(e,a,l)=>{Promise.resolve().then(l.bind(l,71081))},71081:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>J});var t=l(47210),s=l(63650);function r(e){let{data:a,columns:l,isLoading:r,emptyText:n="暂无数据",sortColumn:o,sortDirection:i,onSort:c,expansion:d=""}=e,u=(0,s.useRef)(null),m=(0,s.useRef)(null),h=(0,s.useCallback)(()=>{var e;if(!m.current)return;let a=m.current.querySelectorAll("td");if(!a.length)return;let t=Array.from(a).slice(0,l.length).map(e=>e.getBoundingClientRect().width);if(!t.some((e,a)=>{var l,t;return Math.abs(((null==(t=u.current)||null==(l=t.querySelectorAll("th")[a])?void 0:l.getBoundingClientRect().width)||0)-e)>.1}))return;let s=null==(e=u.current)?void 0:e.querySelectorAll("th");s&&s.forEach((e,a)=>{e.style.width="".concat(t[a],"px"),e.style.maxWidth="".concat(t[a],"px"),e.style.minWidth="".concat(t[a],"px")})},[l.length]),x=(0,s.useCallback)((e,a)=>l=>{let t=l.target;t===e?requestAnimationFrame(()=>{a.scrollLeft=t.scrollLeft}):requestAnimationFrame(()=>{e.scrollLeft=t.scrollLeft})},[]),v=(0,s.useMemo)(()=>(0,t.jsx)("tr",{children:l.map(e=>(0,t.jsx)("th",{className:"\n            px-4 py-3 text-left text-sm font-medium text-[--table-header-foreground] whitespace-nowrap\n            ".concat(e.sortable?"cursor-pointer hover:text-[--primary]":"","\n          "),title:e.title,onClick:()=>e.sortable&&(null==c?void 0:c(e.accessorKey)),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[e.header,e.sortable&&o===e.accessorKey&&(0,t.jsx)("span",{className:"text-[--primary]",children:"asc"===i?"↑":"↓"})]})},String(e.accessorKey)))}),[l,o,i,c]);return((0,s.useEffect)(()=>{let e=u.current,a=m.current;if(!e||!a)return;let l=x(e,a);return e.addEventListener("scroll",l),a.addEventListener("scroll",l),()=>{e.removeEventListener("scroll",l),a.removeEventListener("scroll",l)}},[x,u.current,m.current]),(0,s.useEffect)(()=>{var e;h(),window.addEventListener("resize",h);let a=new ResizeObserver(h),t=null==(e=m.current)?void 0:e.querySelectorAll("td");return t&&Array.from(t).slice(0,l.length).forEach(e=>{a.observe(e)}),()=>{window.removeEventListener("resize",h),a.disconnect()}},[a,h]),r)?(0,t.jsx)("div",{className:"w-full h-96 flex items-center justify-center text-[--muted-foreground]",children:"加载中..."}):a.length?(0,t.jsxs)("div",{className:"w-full relative",children:[(0,t.jsx)("div",{ref:u,className:"w-full overflow-x-auto border-b border-[--table-border] bg-[--background]",style:{position:"sticky",top:"64px",zIndex:1},children:(0,t.jsx)("table",{className:"min-w-full w-max border-collapse",children:(0,t.jsx)("thead",{children:v})})}),(0,t.jsx)("div",{ref:m,className:"w-full overflow-x-auto [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden",children:(0,t.jsx)("table",{className:"min-w-full w-max border-collapse",children:(0,t.jsx)("tbody",{children:a.map((e,s)=>(0,t.jsx)("tr",{className:"border-b border-[--table-border] hover:bg-[--table-row-hover]",children:l.map(l=>(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-[--foreground] whitespace-nowrap",children:l.cell?l.cell(e[l.accessorKey],e,a,d):String(e[l.accessorKey])},String(l.accessorKey)))},s))})})})]}):(0,t.jsx)("div",{className:"w-full h-96 flex items-center justify-center text-[--muted-foreground]",children:n})}var n=l(25852),o=l(6214),i=l(54415);function c(e){let{columns:a,visibleColumns:l,onColumnToggle:r}=e,[c,d]=(0,s.useState)(!1),u=(0,s.useMemo)(()=>{let e=["name","color","rarity"];return a.filter(a=>!e.includes(a.accessorKey))},[a]),m=(0,s.useMemo)(()=>Array.from(l).filter(e=>!["name","color","rarity"].includes(e)).length,[l]);return(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"sm:hidden mb-2",children:(0,t.jsxs)(n.$,{variant:"secondary",size:"sm",onClick:()=>d(!c),className:"w-full flex items-center justify-between bg-[--component-background]",children:[(0,t.jsxs)("span",{children:["显示/隐藏列（",m,"/",u.length,"）"]}),c?(0,t.jsx)(o.A,{className:"h-4 w-4"}):(0,t.jsx)(i.A,{className:"h-4 w-4"})]})}),(0,t.jsxs)("div",{className:"hidden sm:flex sm:items-center sm:gap-2 mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-[--component-foreground-muted]",children:"显示/隐藏列："}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map(e=>{let a=String(e.accessorKey),s=l.has(a);return(0,t.jsx)(n.$,{variant:s?"secondary":"ghost",size:"sm",onClick:()=>r(a),title:e.title,className:"bg-[--component-background] justify-center",children:e.header},a)})})]}),(0,t.jsx)("div",{className:"sm:hidden ".concat(c?"":"hidden"),children:(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:u.map(e=>{let a=String(e.accessorKey),s=l.has(a);return(0,t.jsx)(n.$,{variant:s?"secondary":"ghost",size:"sm",onClick:()=>r(a),title:e.title,className:"w-full bg-[--component-background] justify-start",children:e.header},a)})})})]})}var d=l(74381);function u(e){let{color:a}=e,l=""===a?["C"]:a.split("").sort(),s=5===l.length?"-space-x-2":l.length>=3?"-space-x-1":"gap-0.5";return(0,t.jsx)("div",{className:"flex ".concat(s),children:l.map((e,a)=>(0,t.jsx)("div",{className:"w-4 h-4 bg-no-repeat bg-center bg-contain card-symbol-".concat(e),title:function(e){switch(e){case"W":return"白色";case"U":return"蓝色";case"B":return"黑色";case"R":return"红色";case"G":return"绿色";case"M":return"多色";case"C":return"无色";default:return""}}(e)},a))})}var m=l(84531);let h=e=>{var a,l,r,n,o,i,c,h,x,v,p,f,b;let{card:g,visible:w,x:j,y,expansion:N,isMobile:_}=e,{chineseCards:C}=(0,d.xp)(),S=C[g.name],k=(null==S?void 0:S.zhs_name)||(null==S?void 0:S.officialName)||(null==S?void 0:S.translatedName),[R,B]=(0,s.useState)(null),D=e=>e?e.replace(/\\n/g,"\n").replace(/CARDNAME/g,k||g.name):"";if((0,s.useEffect)(()=>{if(!w)return void B(null);w&&(null==S?void 0:S.setCode)&&(null==S?void 0:S.number)&&fetch("https://api.sbwsz.com/card/".concat(S.setCode,"/").concat(S.number)).then(e=>e.json()).then(e=>{var a;("normal"===e.type||"double"===e.type)&&(null==(a=e.data)?void 0:a[0])&&B({type:e.type,data:e.data.map(e=>({zhs_type:e.zhs_type,zhs_text:e.zhs_text,translatedText:e.translatedText,side:e.side,zhs_faceName:e.zhs_faceName}))})}).catch(console.error)},[w,null==S?void 0:S.setCode,null==S?void 0:S.number]),!w)return null;let M=(()=>{if(_)return{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"calc(100% - 32px)",maxWidth:"450px",maxHeight:"calc(100vh - 64px)",overflow:"auto"};let e=(null==R?void 0:R.type)==="normal"?300:400,a=window.innerHeight,l=window.innerWidth,t=y+10;t+e+10>a&&(t=y-e-10);let s=j+10,r=(null==R?void 0:R.type)==="normal"?300:450;return s+r>l-10&&(s=l-r-10),{top:t,left:s}})(),O=N.startsWith("Y")?"y".concat(N.slice(N.match(/Y\d{0,2}/)[0].length)).toLowerCase():N.toLowerCase(),W=g.url||((null==S?void 0:S.scryfallId)?"https://cards.scryfall.io/normal/front/".concat(S.scryfallId.slice(0,1),"/").concat(S.scryfallId.slice(1,2),"/").concat(S.scryfallId,".jpg"):null);return(0,t.jsxs)(t.Fragment,{children:[_&&w&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>{let e=new MouseEvent("mouseleave");document.dispatchEvent(e)}}),(0,t.jsxs)("div",{className:"fixed z-50 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 ".concat(_?"overflow-y-auto aspect-[3/4]":"p-4"),style:M,onClick:e=>e.stopPropagation(),children:[_&&(0,t.jsx)("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-bold text-lg",children:k}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:g.name})]}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),(null==S?void 0:S.setCode)&&(null==S?void 0:S.number)&&window.open("https://www.sbwsz.com/card/".concat(S.setCode,"/").concat(S.number,"?utm_source=shiqidi"),"_blank")},className:"text-sm text-blue-500 hover:text-blue-600",children:"在 大学院废墟 中查看"})]})}),(0,t.jsx)("div",{className:_?"p-4":"",children:(0,t.jsxs)("div",{className:"flex ".concat(_?"flex-col":"gap-4"),children:[W&&_&&(0,t.jsx)("div",{className:"w-full aspect-[7/5] mb-4 rounded-lg overflow-hidden",children:(0,t.jsx)(m.default,{src:W,alt:g.name,width:350,height:250,className:"w-full h-full object-contain",unoptimized:!0})}),(0,t.jsxs)("div",{className:"space-y-3 flex-1",children:[!_&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-lg",children:k}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:g.name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-20 flex justify-end",children:(0,t.jsx)(u,{color:g.color})}),(0,t.jsx)("i",{className:"keyrune ss ss-".concat(O," ss-").concat(g.rarity.toLowerCase()," ss-2x"),title:g.rarity})]})]}),(null==R?void 0:R.data)&&(0,t.jsx)("div",{className:"text-sm p-3 bg-gray-50 dark:bg-gray-900 rounded",children:"normal"===R.type?(0,t.jsxs)("div",{className:"whitespace-pre-wrap break-words max-w-[300px]",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:null==(a=R.data[0])?void 0:a.zhs_type}),(0,t.jsx)("div",{children:D((null==(l=R.data[0])?void 0:l.zhs_text)||(null==(r=R.data[0])?void 0:r.translatedText))})]}):(0,t.jsxs)("div",{className:"flex gap-4 max-w-[450px]",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0 whitespace-pre-wrap break-words",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:null==(n=R.data[0])?void 0:n.zhs_faceName}),(0,t.jsx)("div",{className:"font-medium text-sm text-gray-600 dark:text-gray-400 mb-1",children:null==(o=R.data[0])?void 0:o.zhs_type}),(0,t.jsx)("div",{children:D((null==(i=R.data[0])?void 0:i.zhs_text)||(null==(c=R.data[0])?void 0:c.translatedText))})]}),(0,t.jsx)("div",{className:"w-px bg-gray-200 dark:bg-gray-700 mx-2 shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 whitespace-pre-wrap break-words",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:null==(h=R.data[1])?void 0:h.zhs_faceName}),(0,t.jsx)("div",{className:"font-medium text-sm text-gray-600 dark:text-gray-400 mb-1",children:null==(x=R.data[1])?void 0:x.zhs_type}),(0,t.jsx)("div",{children:D((null==(v=R.data[1])?void 0:v.zhs_text)||(null==(p=R.data[1])?void 0:p.translatedText))})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm bg-gray-50 dark:bg-gray-900 p-2 rounded",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium text-lg",children:(null==(f=g.avg_seen)?void 0:f.toFixed(1))||"-"}),(0,t.jsx)("div",{className:"text-gray-500",children:"平均抓位"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium text-lg",children:(g.ever_drawn_win_rate?(100*g.ever_drawn_win_rate).toFixed(1):"-")+"%"}),(0,t.jsx)("div",{className:"text-gray-500",children:"在手胜率"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium text-lg",children:(g.drawn_improvement_win_rate?(100*g.drawn_improvement_win_rate).toFixed(1):"-")+"%"}),(0,t.jsx)("div",{className:"text-gray-500",children:"抽到胜率提升"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"见过次数"}),(0,t.jsx)("span",{className:"font-medium",children:g.seen_count||0})]}),(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"选择次数"}),(0,t.jsx)("span",{className:"font-medium",children:g.pick_count||0})]}),(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"平均选择位置"}),(0,t.jsx)("span",{className:"font-medium",children:(null==(b=g.avg_pick)?void 0:b.toFixed(1))||"-"})]}),(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"游戏次数"}),(0,t.jsx)("span",{className:"font-medium",children:g.game_count||0})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm border-t pt-2",children:[(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"起手胜率"}),(0,t.jsx)("span",{className:"font-medium",children:(g.opening_hand_win_rate?(100*g.opening_hand_win_rate).toFixed(1):"-")+"%"})]}),(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"抽到胜率"}),(0,t.jsx)("span",{className:"font-medium",children:(g.drawn_win_rate?(100*g.drawn_win_rate).toFixed(1):"-")+"%"})]}),(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"未抽到胜率"}),(0,t.jsx)("span",{className:"font-medium",children:(g.never_drawn_win_rate?(100*g.never_drawn_win_rate).toFixed(1):"-")+"%"})]}),(0,t.jsxs)("p",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"使用胜率"}),(0,t.jsx)("span",{className:"font-medium",children:(g.win_rate?(100*g.win_rate).toFixed(1):"-")+"%"})]})]})]}),W&&!_&&(0,t.jsx)("div",{className:"w-[240px] h-[340px] flex-shrink-0 rounded-lg overflow-hidden",children:(0,t.jsx)(m.default,{src:W,alt:g.name,width:240,height:340,className:"object-cover",unoptimized:!0})})]})})]})]})};var x=l(26398);function v(e){let{card:a,expansion:l}=e,{chineseCards:r}=(0,d.xp)(),n=r[a.name],o=(null==n?void 0:n.zhs_name)||(null==n?void 0:n.officialName)||(null==n?void 0:n.translatedName),i=(0,x.U)("(max-width: 1024px)"),[c,u]=(0,s.useState)(!1),[m,v]=(0,s.useState)({x:0,y:0}),p=a.url||((null==n?void 0:n.scryfallId)?"https://cards.scryfall.io/normal/front/".concat(n.scryfallId.slice(0,1),"/").concat(n.scryfallId.slice(1,2),"/").concat(n.scryfallId,".jpg"):null);return(0,s.useEffect)(()=>(i&&c?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[i,c]),(0,t.jsxs)("div",{className:"relative max-w-[300px] cursor-pointer",style:{backgroundImage:p?"url(".concat(p,")"):"none",backgroundSize:"150%",backgroundPosition:"-50px -100px"},onMouseEnter:()=>!i&&u(!0),onMouseLeave:()=>!i&&u(!1),onMouseMove:e=>{i||v({x:e.clientX,y:e.clientY})},onClick:e=>{if(i){e.preventDefault(),e.stopPropagation();let a=e.currentTarget.getBoundingClientRect();v({x:a.left,y:a.top+window.scrollY}),u(!c)}else(null==n?void 0:n.setCode)&&(null==n?void 0:n.number)&&window.open("https://www.sbwsz.com/card/".concat(n.setCode,"/").concat(n.number,"?utm_source=shiqidi"),"_blank")},children:[(0,t.jsxs)("div",{className:"relative z-1 bg-black/50 p-1 rounded hover:bg-black/60 transition-colors",children:[(0,t.jsx)("div",{className:"font-medium text-white truncate",children:o||a.name}),(0,t.jsx)("div",{className:"text-sm text-gray-300 truncate",children:a.name})]}),(0,t.jsx)(h,{card:a,visible:c,x:m.x,y:m.y,expansion:l,isMobile:i})]})}function p(e){let{rank:a,total:l,value:s,zScore:r,mean:n,stdDev:o,label:i,isLowerBetter:c=!1}=e,d=["% GP","GP WR","OH WR","GD WR","GIH WR","GNS WR","IWD"].includes(i),u=e=>d?"".concat((100*e).toFixed(1),"%"):["ALSA","ATA"].includes(i)?e.toFixed(2):e.toFixed(1);return(0,t.jsx)("div",{className:"absolute z-[100] bg-[--component-background] border border-[--border] rounded-md shadow-lg p-2 text-sm min-w-[180px]",children:(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)("div",{className:"font-medium text-[--component-foreground] mb-1",children:[i," 统计"]}),(0,t.jsx)("div",{className:"text-[--component-foreground-muted]",children:(0,t.jsxs)("div",{className:"grid grid-cols-[3.5rem,1fr] gap-x-1",children:[(0,t.jsx)("span",{children:"排名："}),(0,t.jsxs)("span",{className:"text-right",children:[a," / ",l]}),(0,t.jsx)("span",{children:"数值："}),(0,t.jsx)("span",{className:"text-right",children:u(s)}),(0,t.jsx)("span",{children:"Z分数："}),(0,t.jsx)("span",{className:"text-right",children:(c?-r:r).toFixed(1)}),(0,t.jsx)("span",{children:"平均值："}),(0,t.jsxs)("span",{className:"text-right",children:[u(n)," \xb1 ",u(o)]})]})})]})})}var f=l(28128),b=l(35923),g=l(43197),w=l(5042);function j(e){let{value:a,stats:l,label:r,formatter:n=e=>e.toFixed(2)}=e,[o,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)("right"),u=(0,s.useRef)(null);return((0,s.useEffect)(()=>{if(o&&u.current){let e=u.current,a=e.closest(".card");if(a){let l=e.getBoundingClientRect();d(a.getBoundingClientRect().right-l.right>=200?"right":"left")}}},[o]),null===a||null===l)?(0,t.jsx)("span",{children:"-"}):(0,t.jsxs)("div",{className:"relative inline-block",ref:u,children:[(0,t.jsxs)("span",{className:"cursor-help",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[n(a),(e=>{let a=["ALSA","ATA"].includes(r)?-e:e;return a>=2.5?(0,t.jsx)(f.A,{className:"inline-block w-3 h-3 text-green-500"}):a>=1.5?(0,t.jsx)(b.A,{className:"inline-block w-3 h-3 text-green-500"}):a<=-2.5?(0,t.jsx)(g.A,{className:"inline-block w-3 h-3 text-red-500"}):a<=-1.5?(0,t.jsx)(w.A,{className:"inline-block w-3 h-3 text-red-500"}):null})(l.zScore)]}),o&&(0,t.jsx)("div",{className:"absolute top-0 z-[9999] ".concat("right"===c?"left-full ml-2":"left-[-190px]"),children:(0,t.jsx)(p,{...l,label:r,isLowerBetter:["ALSA","ATA"].includes(r)})})]})}function y(e){return 0===e.length?0:e.reduce((e,a)=>e+a,0)/e.length}function N(e,a,l){if(null===l||"number"!=typeof l||isNaN(l)||!isFinite(l))return null;let t=e.map(e=>e[a]).filter(e=>null!==e&&"number"==typeof e&&!isNaN(e)&&isFinite(e));if(0===t.length)return null;let s="avg_seen"===a||"avg_pick"===a,r=y(t),n=0===t.length?0:Math.sqrt(y(t.map(e=>Math.pow(e-r,2)))),o=0===n?0:(l-r)/n;return{rank:function(e,a){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return[...a].sort((e,a)=>l?e-a:a-e).indexOf(e)+1}(l,t,s),total:t.length,value:l,zScore:o,mean:r,stdDev:n}}let _={common:"普通",uncommon:"非普通",rare:"稀有",mythic:"秘稀"},C={common:1,uncommon:2,rare:3,mythic:4},S=e=>""===e?0:"WUBRG"===e?7:e.length>1?6:({W:1,U:2,B:3,R:4,G:5})[e]||0;function k(e){let{data:a,isLoading:l,expansion:n}=e,o=(0,s.useMemo)(()=>[{header:"卡牌名称",accessorKey:"name",sortable:!0,cell:(e,a)=>(0,t.jsx)(v,{card:a,expansion:n})},{header:"颜色",accessorKey:"color",sortable:!0,cell:e=>(0,t.jsx)("div",{className:"w-12",children:(0,t.jsx)(u,{color:String(e)})})},{header:"稀有度",accessorKey:"rarity",sortable:!0,cell:(e,a,l,s)=>{let r=String(e).toLowerCase(),n=s.startsWith("Y")?"y".concat(s.slice(s.match(/Y\d{0,2}/)[0].length)).toLowerCase():s.toLowerCase();return(0,t.jsx)("i",{className:"keyrune ss ss-".concat(n," ss-").concat(r," ss-2x"),"aria-hidden":"true",title:String(_[r]||e)})}},{header:"# Seen",accessorKey:"seen_count",title:"轮抽中见过的次数",sortable:!0},{header:"ALSA",accessorKey:"avg_seen",title:"平均最后见到的抓位",sortable:!0,cell:(e,a,l)=>(0,t.jsx)(j,{value:e,stats:N(l,"avg_seen",e),label:"ALSA"})},{header:"# Picked",accessorKey:"pick_count",title:"被选择的次数",sortable:!0},{header:"ATA",accessorKey:"avg_pick",title:"平均选择抓位",sortable:!0,cell:(e,a,l)=>(0,t.jsx)(j,{value:e,stats:N(l,"avg_pick",e),label:"ATA"})},{header:"# GP",accessorKey:"game_count",title:"使用过的对局数量",sortable:!0},{header:"% GP",accessorKey:"play_rate",title:"主牌使用率",sortable:!0,cell:(e,a,l)=>(0,t.jsx)(j,{value:e,stats:N(l,"play_rate",e),label:"% GP",formatter:e=>"".concat((100*e).toFixed(1),"%")})},{header:"GP WR",accessorKey:"win_rate",title:"主牌使用时的胜率",sortable:!0,cell:(e,a,l)=>(0,t.jsx)(j,{value:e,stats:N(l,"win_rate",e),label:"GP WR",formatter:e=>"".concat((100*e).toFixed(1),"%")})},{header:"# OH",accessorKey:"opening_hand_game_count",title:"在起手的对局数量",sortable:!0},{header:"OH WR",accessorKey:"opening_hand_win_rate",title:"在起手时的胜率",sortable:!0,cell:(e,a,l)=>(0,t.jsx)(j,{value:e,stats:N(l,"opening_hand_win_rate",e),label:"OH WR",formatter:e=>"".concat((100*e).toFixed(1),"%")})},{header:"# GD",accessorKey:"drawn_game_count",title:"第一回合后抽到的对局数量",sortable:!0},{header:"GD WR",accessorKey:"drawn_win_rate",title:"第一回合后抽到的胜率",sortable:!0,cell:(e,a,l)=>(0,t.jsx)(j,{value:e,stats:N(l,"drawn_win_rate",e),label:"GD WR",formatter:e=>"".concat((100*e).toFixed(1),"%")})},{header:"# GIH",accessorKey:"ever_drawn_game_count",title:"在手上的对局数量(起手或抽到)",sortable:!0},{header:"GIH WR",accessorKey:"ever_drawn_win_rate",title:"在手上时的胜率(起手或抽到)",sortable:!0,cell:(e,a,l)=>(0,t.jsx)(j,{value:e,stats:N(l,"ever_drawn_win_rate",e),label:"GIH WR",formatter:e=>"".concat((100*e).toFixed(1),"%")})},{header:"# GNS",accessorKey:"never_drawn_game_count",title:"未见到的对局数量",sortable:!0},{header:"GNS WR",accessorKey:"never_drawn_win_rate",title:"未见到的胜率",sortable:!0,cell:(e,a,l)=>(0,t.jsx)(j,{value:e,stats:N(l,"never_drawn_win_rate",e),label:"GNS WR",formatter:e=>"".concat((100*e).toFixed(1),"%")})},{header:"IWD",accessorKey:"drawn_improvement_win_rate",title:"抽到时的胜率提升",sortable:!0,cell:(e,a,l)=>(0,t.jsx)(j,{value:e,stats:N(l,"drawn_improvement_win_rate",e),label:"IWD",formatter:e=>"".concat((100*e).toFixed(1),"%")})}],[n]),[i,d]=(0,s.useState)({column:void 0,direction:"desc"}),[m,h]=(0,s.useState)(new Set(o.map(e=>String(e.accessorKey))));(0,s.useEffect)(()=>{let e=localStorage.getItem("visibleColumns");e&&h(new Set(JSON.parse(e)))},[]);let x=(0,s.useCallback)(e=>{h(a=>{let l=new Set(a);return l.has(e)?l.delete(e):l.add(e),localStorage.setItem("visibleColumns",JSON.stringify([...l])),l})},[]),p=(0,s.useMemo)(()=>o.filter(e=>m.has(String(e.accessorKey))),[m,o]),f=(0,s.useMemo)(()=>i.column?[...a].sort((e,a)=>{let l=e[i.column],t=a[i.column];if(null===l)return 1;if(null===t)return -1;if(l===t)return 0;if("rarity"===i.column){let e=(C[String(l).toLowerCase()]||0)-(C[String(t).toLowerCase()]||0);return"asc"===i.direction?e:-e}if("color"===i.column){let e=S(String(l))-S(String(t));return"asc"===i.direction?e:-e}if(void 0===l)return 1;if(void 0===t)return -1;let s=l<t?-1:1;return"asc"===i.direction?s:-s}):a,[a,i]),b=(0,s.useCallback)(e=>{d(a=>({column:e,direction:a.column===e&&"asc"===a.direction?"desc":"asc"}))},[]);return(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"w-[calc(100vw-2rem)] lg:w-[calc(100vw-4rem)] xl:w-[calc(100vw-6rem)] mx-auto",children:[(0,t.jsx)(c,{columns:o,visibleColumns:m,onColumnToggle:x}),(0,t.jsx)("div",{className:"card",children:(0,t.jsx)(r,{data:f,columns:p,isLoading:l,emptyText:"暂无卡牌数据",sortColumn:i.column,sortDirection:i.direction,onSort:b,expansion:n})})]})})}var R=l(32576),B=l(30620),D=l(59591),M=l.n(D);l(81041);var O=l(18127);function W(e){let{startDate:a,endDate:l,onStartDateChange:s,onEndDateChange:r}=e,n=(0,x.U)("(max-width: 1024px)"),o="form-control w-full sm:w-32 bg-[--component-background] border border-[--border] rounded-md px-3 py-2 text-sm text-[--component-foreground] focus:border-[--primary] focus:outline-none focus:ring-1 focus:ring-[--primary]";return(0,t.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,t.jsx)(M(),{selected:a,onChange:e=>e&&s(e),selectsStart:!0,startDate:a,endDate:l,maxDate:l,placeholderText:"开始日期",className:o,withPortal:n,portalId:"date-picker-portal",dateFormat:"yyyy/MM/dd",locale:O.g}),(0,t.jsx)("span",{className:"text-[--component-foreground-muted] shrink-0",children:"–"}),(0,t.jsx)(M(),{selected:l,onChange:e=>e&&r(e),selectsEnd:!0,startDate:a,endDate:l,minDate:a,maxDate:new Date,placeholderText:"结束日期",className:o,withPortal:n,portalId:"date-picker-portal",dateFormat:"yyyy/MM/dd",locale:O.g})]})}var L=l(2143);function G(e){let{open:a,onClose:l,children:r,anchor:n}=e,o=(0,s.useRef)(null);if((0,s.useEffect)(()=>{if(!a)return;let e=e=>{let a=e.target,t=document.getElementById("date-picker-portal");(null==t?void 0:t.contains(a))||!o.current||o.current.contains(a)||!n||n.contains(a)||l()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a,l,n]),!a||!n)return null;let i=n.getBoundingClientRect();return(0,L.createPortal)((0,t.jsx)("div",{ref:o,className:"fixed z-50 w-[calc(100vw-2rem)] max-w-md bg-[--background] rounded-lg shadow-lg p-4 space-y-4 max-h-[80vh] overflow-y-auto",style:{top:"".concat(i.bottom+8,"px"),left:"50%",transform:"translateX(-50%)"},children:r}),document.body)}var E=l(65347),F=l(90032);function z(e){let{params:a,onParamsChange:l,onColorFilter:r,selectedColors:n,onRarityFilter:o,selectedRarities:i,onSearchFilter:c,searchText:d}=e,u=(0,E.H)(a.start_date),m=(0,E.H)(a.end_date),h=(0,x.U)("(max-width: 1024px)"),[v,p]=(0,s.useState)(!1),f=(0,s.useRef)(null),[b,g]=(0,s.useState)(a),[w,j]=(0,s.useState)(n),[y,N]=(0,s.useState)(i);return(0,t.jsxs)("div",{className:"space-y-4",children:[h?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(R.p,{placeholder:"搜索卡牌名称...",value:d,onChange:e=>c(e.target.value),className:"flex-1"}),(0,t.jsx)(B.l,{options:F.Id,value:a.expansion,onChange:e=>l({expansion:e.target.value}),title:"系列",className:"w-32 shrink-0"}),(0,t.jsx)("button",{ref:f,onClick:()=>{g(a),j(n),N(i),p(!0)},className:"\n              p-2 rounded-md transition-colors shrink-0\n              ".concat(v?"bg-[--primary] text-white":"bg-[--component-background] hover:bg-[--component-background-hover]","\n            "),"aria-label":"显示筛选选项",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,t.jsx)("path",{d:"M10 3.75a2 2 0 10-4 0 2 2 0 004 0zM17.25 4.5a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM5 3.75a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 01.75.75zM4.25 17a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM17.25 17a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM9 10a.75.75 0 01-.75.75h-5.5a.75.75 0 010-1.5h5.5A.75.75 0 019 10zM17.25 10.75a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM14 10a2 2 0 10-4 0 2 2 0 004 0zM10 16.25a2 2 0 10-4 0 2 2 0 004 0z"})})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)(R.p,{placeholder:"搜索卡牌名称...",value:d,onChange:e=>c(e.target.value),className:"w-full sm:w-64"}),(0,t.jsx)("div",{className:"w-full sm:w-auto",children:(0,t.jsx)(W,{startDate:u,endDate:m,onStartDateChange:e=>l({start_date:e.toISOString().split("T")[0]}),onEndDateChange:e=>l({end_date:e.toISOString().split("T")[0]})})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4",children:[(0,t.jsx)(B.l,{options:F.Id,value:a.expansion,onChange:e=>l({expansion:e.target.value}),title:"系列",className:"w-full sm:w-32 shrink-0"}),(0,t.jsx)(B.l,{options:F.or,value:a.format,onChange:e=>l({format:e.target.value}),title:"模式",className:"w-full sm:w-auto sm:min-w-[140px]"}),(0,t.jsx)(B.l,{options:F.bf,value:a.user_group,onChange:e=>l({user_group:e.target.value}),title:"用户组",className:"w-full sm:w-auto sm:min-w-[100px]"}),(0,t.jsx)(B.l,{options:F.x3,value:a.colors||"",onChange:e=>l({colors:e.target.value}),title:"套牌颜色",className:"w-full sm:w-auto sm:min-w-[120px]"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-[--component-foreground-muted] whitespace-nowrap",children:"卡牌颜色:"}),(0,t.jsx)("div",{className:"flex gap-1",children:F.qW.map(e=>(0,t.jsx)("button",{className:"\n                      w-8 h-8 rounded-full flex items-center justify-center\n                      card-symbol-".concat(e.value,"\n                      bg-no-repeat bg-[length:100%_100%]\n                      ").concat(n.includes(e.value)?"ring-2 ring-[#FFB000] ring-opacity-80":"hover:ring-2 hover:ring-[#FFB000] hover:ring-opacity-50 brightness-75","\n                      bg-[--component-background] hover:bg-[--component-background-hover]\n                      transition-all\n                    "),onClick:()=>{r(n.includes(e.value)?n.filter(a=>a!==e.value):[...n,e.value])}},e.value))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-[--component-foreground-muted] whitespace-nowrap",children:"稀有度:"}),(0,t.jsx)("div",{className:"flex gap-1",children:F.YV.map(e=>(0,t.jsx)("button",{className:"\n                      w-8 h-8 rounded-full flex items-center justify-center\n                      ".concat(i.includes(e.value)?"ring-2 ring-[#FFB000] ring-opacity-80":"hover:ring-2 hover:ring-[#FFB000] hover:ring-opacity-50 brightness-75","\n                      transition-all\n                    "),onClick:()=>{o(i.includes(e.value)?i.filter(a=>a!==e.value):[...i,e.value])},title:e.label,children:(0,t.jsx)("i",{className:"keyrune ss ss-".concat(a.expansion.toLowerCase()," ss-").concat(e.value," ss-2x"),"aria-hidden":"true",style:{backgroundColor:"transparent"}})},e.value))})]})]})]}),h&&(0,t.jsx)(G,{open:v,onClose:()=>p(!1),anchor:f.current,children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(W,{startDate:(0,E.H)(b.start_date),endDate:(0,E.H)(b.end_date),onStartDateChange:e=>g({...b,start_date:e.toISOString().split("T")[0]}),onEndDateChange:e=>g({...b,end_date:e.toISOString().split("T")[0]})}),(0,t.jsx)(B.l,{options:F.or,value:b.format,onChange:e=>g({...b,format:e.target.value}),title:"模式",className:"w-full"}),(0,t.jsx)(B.l,{options:F.bf,value:b.user_group,onChange:e=>g({...b,user_group:e.target.value}),title:"用户组",className:"w-full"}),(0,t.jsx)(B.l,{options:F.x3,value:b.colors||"",onChange:e=>g({...b,colors:e.target.value}),title:"套牌颜色",className:"w-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{className:"text-sm text-[--component-foreground-muted] whitespace-nowrap",children:"卡牌颜色:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:F.qW.map(e=>(0,t.jsx)("button",{className:"\n                      w-8 h-8 rounded-full flex items-center justify-center\n                      card-symbol-".concat(e.value,"\n                      bg-no-repeat bg-[length:100%_100%]\n                      ").concat(w.includes(e.value)?"ring-2 ring-[#FFB000] ring-opacity-80":"hover:ring-2 hover:ring-[#FFB000] hover:ring-opacity-50 brightness-75","\n                      bg-[--component-background] hover:bg-[--component-background-hover]\n                      transition-all\n                    "),onClick:()=>{j(w.includes(e.value)?w.filter(a=>a!==e.value):[...w,e.value])}},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{className:"text-sm text-[--component-foreground-muted] whitespace-nowrap",children:"稀有度:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:F.YV.map(e=>(0,t.jsx)("button",{className:"\n                      w-8 h-8 rounded-full flex items-center justify-center\n                      ".concat(y.includes(e.value)?"ring-2 ring-[#FFB000] ring-opacity-80":"hover:ring-2 hover:ring-[#FFB000] hover:ring-opacity-50 brightness-75","\n                      transition-all\n                    "),onClick:()=>{N(y.includes(e.value)?y.filter(a=>a!==e.value):[...y,e.value])},title:e.label,children:(0,t.jsx)("i",{className:"keyrune ss ss-".concat(a.expansion.toLowerCase()," ss-").concat(e.value," ss-2x"),"aria-hidden":"true",style:{backgroundColor:"transparent"}})},e.value))})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)("button",{onClick:()=>{Object.entries(b).some(e=>{let[l,t]=e;return a[l]!==t})&&l(b),r(w),o(y),p(!1)},className:"px-4 py-2 bg-[--primary] text-white rounded-md hover:bg-[--primary]/90 transition-colors",children:"确定"})})]})})]})}function A(e){let{set:a}=e,l=a.startsWith("Y")?"y".concat(a.slice(a.match(/Y\d{0,2}/)[0].length)).toLowerCase():a.toLowerCase();return(0,t.jsx)("i",{className:"keyrune ss ss-2x ss-".concat(l),"aria-hidden":"true"})}async function U(e){let a=new URLSearchParams({expansion:e.expansion,format:e.format,start_date:e.start_date,end_date:e.end_date});e.user_group&&a.append("user_group",e.user_group),e.colors&&a.append("colors",e.colors);let l=await fetch("https://www.17lands.com/card_ratings/data?".concat(a),{headers:{accept:"application/json"}});if(!l.ok)throw Error("Failed to fetch card data");return l.json()}async function K(e){let a=new URLSearchParams({page:"1",page_size:"9999",get_total:"1",q:JSON.stringify({type:"basic",key:"setCode",operator:"=",value:function(e){let a=e.match(/^Y\d{2}(.+)$/);return a?"Y"+a[1]:e}(e)})}),l=await fetch("https://api.sbwsz.com/search?".concat(a),{headers:{accept:"application/json"}});if(!l.ok)throw Error("Failed to fetch Chinese card data");return l.json()}function T(e){return{type:"and",elements:e.split(" ").map(e=>({type:"basic",key:"name",operator:":",value:e}))}}async function I(e,a){let l=new URLSearchParams({page:"1",page_size:"9999",get_total:"1",q:JSON.stringify({type:"or",elements:e.map(T)})}),t=await fetch("https://api.sbwsz.com/search?".concat(l),{headers:{accept:"application/json"}});if(!t.ok)throw Error("Failed to search Chinese card data");let s=await t.json();return a&&s.results&&a(s.results),s}let Y=!1,P={};async function H(e,a,l){try{let s;P[e]?s={results:P[e]}:(s=await K(e)).results&&(P[e]=s.results);let r={results:[]};if(e.startsWith("Y")){let a=e.replace(/^Y\d{0,2}/,"");P[a]?r={results:P[a]}:(r=await K(a)).results&&(P[a]=r.results)}let n={results:[]};if(Y)P.SPG&&(n={results:P.SPG});else{var t;(null==(t=(n=await K("SPG")).results)?void 0:t.length)>0&&(P.SPG=n.results,Y=!0)}let o=[...s.results||[],...r.results||[],...n.results||[]];l&&o.length>0&&l(o);let i=new Map(o.flatMap(e=>e.faceName?[[e.name,e],[e.faceName,e]]:[[e.name,e]])),c=a.filter(e=>!i.has(e.name));if(c.length>0){let e=function(e,a){let l=[];for(let a=0;a<e.length;a+=10)l.push(e.slice(a,a+10));return l}(c,10);for(let a=0;a<e.length;a++){let t=e[a];try{let e=await I(t.map(e=>e.name));e.results&&(o.push(...e.results),e.results.forEach(e=>{e.setCode&&!P[e.setCode]&&(P[e.setCode]=[]),e.setCode&&!P[e.setCode].some(a=>a.name===e.name)&&P[e.setCode].push(e)}),l&&l([...o]))}catch(e){console.error("Failed to search Chinese card data:",e)}}}return o}catch(e){return console.error("Failed to fetch all Chinese card data:",e),[]}}function q(){let[e,a]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{let e=()=>{a(window.scrollY>300)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),e)?(0,t.jsx)(n.$,{variant:"secondary",size:"icon",className:"fixed bottom-8 right-8 z-50 rounded-full shadow-lg",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},title:"回到顶部",children:(0,t.jsx)(o.A,{className:"h-5 w-5"})}):null}function J(){let{cards:e,params:a,chineseCards:l,isLoading:r,setCards:n,setChineseCards:o,setIsLoading:i,setError:c,setParams:u}=(0,d.xp)(),[m,h]=(0,s.useState)([]),[x,v]=(0,s.useState)([]),[p,f]=(0,s.useState)(""),b=(0,s.useMemo)(()=>{let a=e;if(p){let e=p.toLowerCase();a=a.filter(a=>{let t=a.name.toLowerCase().includes(e),s=l[a.name],r=(null==s?void 0:s.zhs_name)||(null==s?void 0:s.officialName)||(null==s?void 0:s.translatedName),n=null==r?void 0:r.toLowerCase().includes(e);return t||n})}return m.length>0&&(a=a.filter(e=>{let a=e.color?e.color.split(""):[],l=a.length>1,t=0===a.length,s=m.includes("M"),r=m.includes("C");if(t&&r)return!0;if(s){if(!l)return!1;let e=m.filter(e=>"WUBRG".includes(e));return!(e.length>0)||e.every(e=>a.includes(e))}let n=m.filter(e=>"WUBRG".includes(e));return n.length>0&&n.some(e=>a.includes(e))})),x.length>0&&(a=a.filter(e=>x.includes(e.rarity.toLowerCase()))),a},[e,p,m,x,l]);return(0,s.useEffect)(()=>{!async function(){try{i(!0);let e=await U(a);n(e),i(!1),H(a.expansion,e,e=>{o(e)}).catch(e=>{console.error("Failed to load Chinese card data:",e)})}catch(e){c(e),i(!1)}}()},[a,n,o,i,c]),(0,t.jsxs)("div",{className:"py-8",children:[(0,t.jsxs)("div",{className:"container mx-auto px-4 mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,t.jsx)(A,{set:a.expansion}),(0,t.jsxs)("h1",{className:"text-2xl font-semibold",children:[a.expansion," 轮抽卡牌数据"]}),(0,t.jsxs)("a",{href:"https://www.17lands.com/card_data?utm_source=shiqidi",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-md bg-[--accent]/10 text-[--muted-foreground] hover:text-[--foreground] hover:bg-[--accent]/20 transition-colors",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:[(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z",clipRule:"evenodd"}),(0,t.jsx)("path",{fillRule:"evenodd",d:"M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z",clipRule:"evenodd"})]}),"17Lands"]})]}),(0,t.jsx)(z,{params:a,onParamsChange:u,onColorFilter:h,selectedColors:m,onRarityFilter:v,selectedRarities:x,onSearchFilter:f,searchText:p})]}),(0,t.jsx)(k,{data:b,isLoading:r,expansion:a.expansion}),(0,t.jsx)(q,{})]})}},74381:(e,a,l)=>{"use strict";l.d(a,{xp:()=>r,LJ:()=>o,Xk:()=>n});var t=l(72621);let s=new Date().toISOString().split("T")[0],r=(0,t.v)(e=>({cards:[],chineseCards:{},params:{expansion:"TDM",format:"PremierDraft",start_date:"2016-01-01",end_date:s},isLoading:!1,error:null,setCards:a=>e({cards:a}),setChineseCards:a=>e(e=>{let l={...e.chineseCards};return a.forEach(e=>{l[e.name]=e,e.faceName&&(l[e.faceName]=e)}),{chineseCards:l}}),setParams:a=>e(e=>({params:{...e.params,...a}})),setIsLoading:a=>e({isLoading:a}),setError:a=>e({error:a})})),n=(0,t.v)((e,a)=>({data:null,isLoading:!1,error:null,lastUpdated:null,fetchStatus:async function(){let l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a(),s=Date.now();if(l||!t.data||!t.lastUpdated||!(s-t.lastUpdated<6e4)){e({isLoading:!0});try{let a=await fetch("https://magicthegatheringarena.statuspage.io/api/v2/summary.json");if(!a.ok)throw Error("获取状态信息失败");let l=await a.json();e({data:l,error:null,lastUpdated:s})}catch(a){e({error:a instanceof Error?a.message:"未知错误",data:null})}finally{e({isLoading:!1})}}}})),o=(0,t.v)(e=>({chineseSetNames:{},isLoading:!1,error:null,hasLoaded:!1,fetchChineseSetNames:async()=>{let a=o.getState();if(!a.hasLoaded&&!a.isLoading)try{e({isLoading:!0});let a=await fetch("https://sbwsz.com/static/setName.json");if(!a.ok)throw Error("获取系列中文名称失败");let l=await a.json();e({chineseSetNames:l,error:null,hasLoaded:!0})}catch(a){e({error:a instanceof Error?a:Error("获取系列中文名称失败")})}finally{e({isLoading:!1})}}}))},90032:(e,a,l)=>{"use strict";l.d(a,{Id:()=>r,YV:()=>c,bf:()=>n,dY:()=>s,h6:()=>d,or:()=>t,qW:()=>i,x3:()=>o});let t=[{label:"真人轮抽",value:"PremierDraft"},{label:"真人轮抽BO3",value:"TradDraft"},{label:"快速轮抽",value:"QuickDraft"},{label:"现开赛",value:"Sealed"},{label:"现开赛BO3",value:"TradSealed"},{label:"竞技场直邮赛现开",value:"ArenaDirect_Sealed"},{label:"公开赛第二日轮抽BO3",value:"OpenDraft_D2_Draft1_Bo3"},{label:"公开赛第二日轮抽2B BO3",value:"OpenDraft_D2_Draft2B_Bo3"},{label:"公开赛第二日轮抽2 BO3",value:"OpenDraft_D2_Draft2_Bo3"},{label:"公开赛第一日现开BO1",value:"OpenSealed_D1_Bo1"},{label:"公开赛第一日现开BO3",value:"OpenSealed_D1_Bo3"},{label:"资格赛预选现开",value:"QualifierPlayInSealed"}],s=[{label:"真人轮抽",value:"PremierDraft"},{label:"快速轮抽",value:"QuickDraft"},{label:"现开赛",value:"Sealed"},{label:"真人轮抽BO3",value:"TradDraft"},{label:"现开赛BO3",value:"TradSealed"},{label:"神器混合真人轮抽",value:"PremierDraftRemixArtifacts"},{label:"公开赛第二日现开BO3",value:"OpenSealed_D2_Bo3"},{label:"公开赛第二日轮抽BO3",value:"OpenDraft_D2_Bo3"},{label:"公开赛第一日轮抽BO1",value:"OpenDraft_D1_Bo1"},{label:"公开赛第二日轮抽BO3",value:"OpenDraft_D2_Draft1_Bo3"},{label:"全知轮抽",value:"Omniscience_Draft"},{label:"中周现开",value:"MidWeekSealed"},{label:"中周轮抽",value:"MidWeekQuickDraft"},{label:"轮抽挑战赛",value:"DraftChallenge"},{label:"十项全能真人轮抽",value:"DecathlonTradDraft"},{label:"十项全能快速轮抽",value:"DecathlonQuickDraft"},{label:"十项全能决赛2022",value:"DecathlonFinals2022"},{label:"混沌轮抽",value:"CubeDraft"},{label:"资格赛预选现开",value:"QualifierPlayInSealed"},{label:"资格赛预选现开BO3",value:"QualifierPlayInTradSealed"},{label:"资格赛第一日现开",value:"Qualifier_D1_Sealed"},{label:"公开赛第一日现开BO3",value:"OpenSealed_D1_Bo3"},{label:"公开赛第一日现开BO1",value:"OpenSealed_D1_Bo1"},{label:"竞技场直邮赛现开",value:"ArenaDirect_Sealed"}],r=[{label:"TDM",value:"TDM"},{label:"DFT",value:"DFT"},{label:"Y25DFT",value:"Y25DFT"},{label:"PIO",value:"PIO"},{label:"FDN",value:"FDN"},{label:"DSK",value:"DSK"},{label:"Y25DSK",value:"Y25DSK"},{label:"BLB",value:"BLB"},{label:"Y25BLB",value:"Y25BLB"},{label:"MH3",value:"MH3"},{label:"OTJ",value:"OTJ"},{label:"Y24OTJ",value:"Y24OTJ"},{label:"MKM",value:"MKM"},{label:"Y24MKM",value:"Y24MKM"},{label:"LCI",value:"LCI"},{label:"Y24LCI",value:"Y24LCI"},{label:"WOE",value:"WOE"},{label:"Y24WOE",value:"Y24WOE"},{label:"LTR",value:"LTR"},{label:"MOM",value:"MOM"},{label:"MAT",value:"MAT"},{label:"SIR",value:"SIR"},{label:"ONE",value:"ONE"},{label:"Y23ONE",value:"Y23ONE"},{label:"BRO",value:"BRO"},{label:"Y23BRO",value:"Y23BRO"},{label:"DMU",value:"DMU"},{label:"Y23DMU",value:"Y23DMU"},{label:"HBG",value:"HBG"},{label:"SNC",value:"SNC"},{label:"Y22SNC",value:"Y22SNC"},{label:"NEO",value:"NEO"},{label:"DBL",value:"DBL"},{label:"VOW",value:"VOW"},{label:"RAVM",value:"RAVM"},{label:"MID",value:"MID"},{label:"AFR",value:"AFR"},{label:"STX",value:"STX"},{label:"CORE",value:"CORE"},{label:"KHM",value:"KHM"},{label:"KLR",value:"KLR"},{label:"ZNR",value:"ZNR"},{label:"AKR",value:"AKR"},{label:"M21",value:"M21"},{label:"IKO",value:"IKO"},{label:"THB",value:"THB"},{label:"ELD",value:"ELD"},{label:"M20",value:"M20"},{label:"WAR",value:"WAR"},{label:"RNA",value:"RNA"},{label:"GRN",value:"GRN"},{label:"DOM",value:"DOM"},{label:"RIX",value:"RIX"},{label:"KTK",value:"KTK"},{label:"Cube",value:"Cube"},{label:"Chaos",value:"Chaos"}],n=[{label:"所有用户",value:""},{label:"低级",value:"bottom"},{label:"中级",value:"middle"},{label:"顶级",value:"top"}],o=[{label:"全部套牌",value:""},{label:"W",value:"W"},{label:"U",value:"U"},{label:"B",value:"B"},{label:"R",value:"R"},{label:"G",value:"G"},{label:"WU",value:"WU"},{label:"WB",value:"WB"},{label:"WR",value:"WR"},{label:"WG",value:"WG"},{label:"UB",value:"UB"},{label:"UR",value:"UR"},{label:"UG",value:"UG"},{label:"BR",value:"BR"},{label:"BG",value:"BG"},{label:"RG",value:"RG"},{label:"WUB",value:"WUB"},{label:"WUR",value:"WUR"},{label:"WUG",value:"WUG"},{label:"WBR",value:"WBR"},{label:"WBG",value:"WBG"},{label:"WRG",value:"WRG"},{label:"UBR",value:"UBR"},{label:"UBG",value:"UBG"},{label:"URG",value:"URG"},{label:"BRG",value:"BRG"},{label:"WUBR",value:"WUBR"},{label:"WUBG",value:"WUBG"},{label:"WURG",value:"WURG"},{label:"WBRG",value:"WBRG"},{label:"UBRG",value:"UBRG"},{label:"WUBRG",value:"WUBRG"}],i=[{label:"W",value:"W"},{label:"U",value:"U"},{label:"B",value:"B"},{label:"R",value:"R"},{label:"G",value:"G"},{label:"M",value:"M"},{label:"C",value:"C"}],c=[{label:"普通",value:"common"},{label:"非普通",value:"uncommon"},{label:"稀有",value:"rare"},{label:"秘稀",value:"mythic"}],d=Object.fromEntries(t.map(e=>[e.value,e.label]))}},e=>{var a=a=>e(e.s=a);e.O(0,[290,851,531,127,286,25,317,358],()=>a(70015)),_N_E=e.O()}]);