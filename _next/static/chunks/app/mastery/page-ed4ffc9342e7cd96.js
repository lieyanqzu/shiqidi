(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{32336:(e,t,s)=>{"use strict";s.d(t,{MasteryCalculator:()=>D});var a=s(30748),r=s(75440),n=s(78546),l=s(51448);function i(e){let{title:t,icon:s,extra:r,children:n}=e;return(0,a.jsxs)("div",{className:"border border-[--border] rounded-lg p-6 bg-[--card]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s,(0,a.jsx)("h2",{className:"text-lg font-semibold",children:t})]}),r]}),n]})}var c=s(26197);function d(e){let{className:t="",min:s,max:r,step:n,value:l,onValueChange:i,...d}=e;return(0,a.jsxs)(c.bL,{className:"relative flex items-center select-none touch-none w-full h-5 ".concat(t),value:l,onValueChange:i,min:s,max:r,step:n,...d,children:[(0,a.jsx)(c.CC,{className:"relative grow rounded-full h-[3px] bg-[--border]",children:(0,a.jsx)(c.Q6,{className:"absolute h-full rounded-full bg-[--primary]"})}),(0,a.jsx)(c.zi,{className:"block w-4 h-4 bg-[--primary] rounded-full focus:outline-none focus:ring-2 focus:ring-[--ring] disabled:pointer-events-none disabled:opacity-50"})]})}function o(e){let{label:t,description:s,value:r,onChange:n,min:i=0,max:c=100,step:o=1,showMaxValue:m=!1}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:t}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("input",{type:"number",value:r,onChange:e=>{n([Math.min(Math.max(parseInt(e.target.value)||0,i),c)])},min:i,max:c,step:o,className:"w-12 h-7 rounded border border-[--border] bg-[--input] font-mono text-sm text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),m&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["/ ",c]})]})]}),(0,a.jsx)(d,{value:[r],onValueChange:n,min:i,max:c,step:o,className:"my-2"}),s&&(0,a.jsx)("div",{className:"text-xs text-[--muted-foreground]",children:s})]})}var m=s(52617);function u(){let e=new Date;return e.setUTCHours(9,0,0,0),e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function x(e){let{currentLevel:t,excessXP:s,incompleteDailyWins:a,incompleteDailyQuests:r,incompleteWeeklyWins:n}=e;return(t-1)*1e3+s+25*a+500*r+250*n}function p(e,t){return 25*Math.min(e,10)*t}function g(e,t){let s=Math.min(e,15),a=new Date,r=a.getUTCDay(),n=a.getUTCHours(),l=0===r&&n<9,i=Math.floor((t-(l?0:r))/7),c=250*s*i;return(l||t-7*i>=(7-r)%7)&&(c+=250*s),c}function h(e,t){return 500*Math.min(e,t)}function y(e,t){let s=(0,m.H)(e),a=(0,m.H)(t);return!s||isNaN(s.getTime())||!a||isNaN(a.getTime())?(console.error("Invalid date provided to calculateDaysLeft",{currentDate:e,endDate:t}),0):(a.setUTCHours(9,0,0,0),Math.ceil((a.getTime()-s.getTime())/864e5))}let f={setCode:"TDM",startDate:"2025-04-08",endDate:"2025-06-10",maxLevel:70,defaultDailyWins:4,defaultWeeklyWins:15};var b=s(61692),v=s(7563),j=s(35294),N=s(53085);function D(){let[e,t]=(0,r.useState)({currentDate:new Date().toISOString().split("T")[0],endDate:f.endDate,daysLeft:y(new Date().toISOString().split("T")[0],f.endDate),maxLevel:f.maxLevel,currentLevel:1,excessXP:0,incompleteDailyWins:0,incompleteDailyQuests:0,incompleteWeeklyWins:0,dailyWinsPerDay:f.defaultDailyWins,weeklyWinsPerWeek:f.defaultWeeklyWins,dailyQuestsLeft:0}),s=x(e),c=p(e.dailyWinsPerDay,e.daysLeft),d=h(e.dailyQuestsLeft,e.daysLeft),D=g(e.weeklyWinsPerWeek,e.daysLeft),w=Math.floor((s+(c+d+D))/1e3)+1,k=b.c.find(e=>e.code===f.setCode),_=(e,s)=>{t(t=>({...t,[e]:s[0]}))},L=(e,s)=>{t(t=>{let a={...t,[e]:s};return a.daysLeft=y(a.currentDate,a.endDate),a})};return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"精研通行证计算器"}),(0,a.jsx)("p",{className:"mt-2 text-[--muted-foreground]",children:"计算精研通行证等级进度，帮助你规划每日任务"})]}),(0,a.jsx)(i,{title:"通行证信息",extra:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"keyrune ss ss-2x ss-".concat(f.setCode.toLowerCase())}),(0,a.jsx)("span",{children:null==k?void 0:k.name})]}),(0,a.jsxs)("div",{className:"text-sm text-[--muted-foreground]",children:["时间：",(()=>{let e=(0,m.H)(f.startDate),t=(0,m.H)(f.endDate),s="yyyy/MM/dd";return(0,a.jsxs)(a.Fragment,{children:[(0,v.f)(e)?(0,j.GP)(e,s,{locale:N.g}):"无效开始日期"," ~ ",(0,v.f)(t)?(0,j.GP)(t,s,{locale:N.g}):"无效结束日期"]})})()]})]}),children:(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:"当前日期"}),(0,a.jsx)(n.p,{type:"date",value:e.currentDate,onChange:e=>L("currentDate",e.target.value),min:f.startDate,max:e.endDate,className:"bg-[--input] font-mono text-center"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:"结束日期"}),(0,a.jsx)(n.p,{type:"date",value:e.endDate,onChange:e=>L("endDate",e.target.value),min:e.currentDate,max:f.endDate,className:"bg-[--input] font-mono text-center"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:"剩余天数"}),(0,a.jsx)(n.p,{type:"text",value:e.daysLeft,readOnly:!0,className:"bg-[--input] font-mono text-center text-lg"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:"最高等级"}),(0,a.jsx)(n.p,{type:"text",value:e.maxLevel,readOnly:!0,className:"bg-[--input] font-mono text-center text-lg"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:"预期等级"}),(0,a.jsx)(n.p,{type:"text",value:w,readOnly:!0,className:"bg-[--input] font-mono text-center text-lg"})]})]})}),(0,a.jsxs)("div",{className:"grid gap-8 lg:grid-cols-2",children:[(0,a.jsx)(i,{title:"当前进度",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"p-4 rounded-lg bg-[--accent]/50",children:(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:"总经验值"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"包含当前等级经验、额外经验和未完成任务经验"}),(0,a.jsx)(n.p,{type:"text",value:x(e).toLocaleString(),readOnly:!0,className:"bg-[--input] font-mono text-center text-lg"})]})}),(0,a.jsx)("div",{className:"border-t border-[--border] pt-6",children:(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-[--accent]/50",children:[(0,a.jsx)(o,{label:"当前等级",description:"设置你当前的通行证等级",value:e.currentLevel,onChange:e=>_("currentLevel",e),min:1,max:e.maxLevel,showMaxValue:!0}),(0,a.jsx)(o,{label:"额外经验值",description:"设置当前等级的额外经验值",value:e.excessXP,onChange:e=>_("excessXP",e),max:1e3,step:25,showMaxValue:!0})]})}),(0,a.jsxs)("div",{className:"border-t border-[--border] pt-6",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-[--muted-foreground] mb-4",children:"未完成任务"}),(0,a.jsxs)("div",{className:"space-y-4 p-4 rounded-lg bg-[--accent]/50",children:[(0,a.jsx)(o,{label:"每日胜场",value:e.incompleteDailyWins,onChange:e=>_("incompleteDailyWins",e),max:10,showMaxValue:!0}),(0,a.jsx)(o,{label:"每日任务",value:e.incompleteDailyQuests,onChange:e=>_("incompleteDailyQuests",e),max:3,showMaxValue:!0}),(0,a.jsx)(o,{label:"每周胜场",value:e.incompleteWeeklyWins,onChange:e=>_("incompleteWeeklyWins",e),max:15,showMaxValue:!0})]})]})]})}),(0,a.jsx)(i,{title:"预期进度",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-[--accent]/50",children:[(0,a.jsx)(o,{label:"每日胜场数",description:"你预计每天能完成多少场胜利？（".concat(u()," 刷新）"),value:e.dailyWinsPerDay,onChange:s=>{t({...e,dailyWinsPerDay:s[0],totalDailyWinXP:p(s[0],e.daysLeft)})},max:10,showMaxValue:!0}),(0,a.jsxs)("div",{className:"mt-4 space-y-1.5",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:"每日胜场经验"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"预计可获得的每日胜场总经验"}),(0,a.jsx)(n.p,{type:"text",value:c.toLocaleString(),readOnly:!0,className:"bg-[--input] font-mono text-center text-lg"})]})]}),(0,a.jsx)("div",{className:"border-t border-[--border] pt-6",children:(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-[--accent]/50",children:[(0,a.jsx)(o,{label:"每日任务数",description:"你预计一共能完成多少个每日任务？（".concat(u()," 刷新）"),value:e.dailyQuestsLeft,onChange:s=>{t({...e,dailyQuestsLeft:s[0],totalDailyQuestXP:h(s[0],e.daysLeft)})},max:e.daysLeft,showMaxValue:!0}),(0,a.jsxs)("div",{className:"mt-4 space-y-1.5",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:"每日任务经验"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"预计可获得的每日任务总经验"}),(0,a.jsx)(n.p,{type:"text",value:d.toLocaleString(),readOnly:!0,className:"bg-[--input] font-mono text-center text-lg"})]})]})}),(0,a.jsx)("div",{className:"border-t border-[--border] pt-6",children:(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-[--accent]/50",children:[(0,a.jsx)(o,{label:"每周胜场数",description:"你预计每周能完成多少场胜利？（".concat(function(){let e=new Date;e.setUTCHours(9,0,0,0),e.setUTCDate(e.getUTCDate()+(7-e.getUTCDay())%7);let t=e.toLocaleDateString([],{weekday:"long"}),s=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return"".concat(t," ").concat(s)}()," 刷新）"),value:e.weeklyWinsPerWeek,onChange:s=>{t({...e,weeklyWinsPerWeek:s[0],totalWeeklyWinsXP:g(s[0],e.daysLeft)})},max:15,showMaxValue:!0}),(0,a.jsxs)("div",{className:"mt-4 space-y-1.5",children:[(0,a.jsx)(l.J,{className:"text-base font-medium",children:"每周胜场经验"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"预计可获得的每周胜场总经验"}),(0,a.jsx)(n.p,{type:"text",value:D.toLocaleString(),readOnly:!0,className:"bg-[--input] font-mono text-center text-lg"})]})]})})]})})]})]})}},51448:(e,t,s)=>{"use strict";s.d(t,{J:()=>r});var a=s(30748);let r=s(75440).forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("label",{ref:t,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ".concat(s||""),...r})});r.displayName="Label"},57282:(e,t,s)=>{Promise.resolve().then(s.bind(s,32336))},61692:e=>{"use strict";e.exports=JSON.parse('{"c":[{"name":"万智牌：基石构筑","code":"FDN","releaseDate":"2024-11-13"},{"name":"先驱大师","code":"PIO","releaseDate":"2024-12-11"},{"name":"乙太飘移","code":"DFT","releaseDate":"2025-02-12","wikiUrl":"https://mtg.wiki/page/Aetherdrift?utm_source=shiqidi","preview":{"title":"扣紧护带","description":"甩开对手！上车加入乙太飘移，参与这场跨越三个时空、让肾上腺素飙升的多重宇宙竞速赛。","backgroundImage":"/image/background/DFT_sma_key_1920x1080_en.jpg","links":[{"name":"大学院废墟（中文）","url":"https://sbwsz.com/previews/DFT?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/products/aetherdrift/card-image-gallery"},{"name":"Scryfall","url":"https://scryfall.com/sets/dft?order=spoiled&utm_source=shiqidi"},{"name":"Untapped.gg","url":"https://mtga.untapped.gg/codex/spoilers/aetherdrift?sortBy=spoilerDate&utm_source=shiqidi"}]}},{"name":"炼金：乙太飘移","code":"YDFT","releaseDate":"2025-03-05","wikiUrl":"https://mtg.wiki/page/Alchemy:_Aetherdrift?utm_source=shiqidi","preview":{"title":"炼金预览","description":"最新炼金系列将于2025年3月5日上线万智牌：竞技场，即日起开始预览。","links":[{"name":"十七地（中文）","url":"/previews/ydft"},{"name":"Scryfall","url":"https://scryfall.com/sets/ydft?order=spoiled&utm_source=shiqidi"}]}},{"name":"鞑契龙岚录","code":"TDM","releaseDate":"2025-04-09","wikiUrl":"https://mtg.wiki/page/Tarkir:_Dragonstorm?utm_source=shiqidi","preview":{"title":"冲破风暴","description":"鞑契比以往更大更狂放，其中满是电影化的行动、充满活力的部落特色，还有强力的新龙，可以成为加入你收藏的持久火力。","backgroundImage":"/image/background/TDM_sma_key_1920x1080_en.jpg","links":[{"name":"大学院废墟（中文）","url":"https://sbwsz.com/previews/TDM?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/products/tarkir-dragonstorm/card-image-gallery"},{"name":"Scryfall","url":"https://scryfall.com/sets/tdm?order=spoiled&utm_source=shiqidi"},{"name":"Untapped.gg","url":"https://mtga.untapped.gg/codex/sets/tarkir-dragonstorm?sortBy=spoilerDate&utm_source=shiqidi"}]}},{"name":"炼金：鞑契","code":"YTDM","releaseDate":"2025-04-30","wikiUrl":"https://mtg.wiki/page/Alchemy:_Tarkir?utm_source=shiqidi","preview":{"title":"炼金预览","description":"最新炼金系列将于2025年4月30日上线万智牌：竞技场，即日起开始预览。","links":[{"name":"十七地（中文）","url":"/previews/ytdm"},{"name":"Scryfall","url":"https://scryfall.com/sets/ytdm?order=spoiled&utm_source=shiqidi"}]}},{"name":"万智牌～最终幻想","code":"FIN","releaseDate":"2025-06-11","wikiUrl":"https://mtg.wiki/page/Final_Fantasy?utm_source=shiqidi","preview":{"title":"史诗聚集于此","description":"施放强大的咒语，唤出经典的召唤兽，还可以乘在陆行鸟背上前往你最爱的地方。用数不胜数的原游戏的元素来创造你自己的故事！","backgroundImage":"/image/background/FIN_sma_key_1920x1080.jpg","links":[{"name":"大学院废墟（中文）","url":"https://sbwsz.com/previews/FIN/?utm_source=shiqidi"},{"name":"官网牌图集合","url":"https://magic.wizards.com/en/products/final-fantasy/card-image-gallery"},{"name":"Scryfall","url":"https://scryfall.com/sets/fin?order=spoiled&utm_source=shiqidi"},{"name":"Untapped.gg","url":"https://mtga.untapped.gg/codex/sets/final-fantasy?sortBy=spoilerDate&utm_source=shiqidi"}]}}]}')},78546:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var a=s(30748);function r(e){let{label:t,error:s,className:r,readOnly:n,...l}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[t&&(0,a.jsx)("label",{className:"text-sm font-medium text-[--component-foreground]",children:t}),(0,a.jsx)("input",{className:"\n          w-full rounded-md border border-[--border] bg-[--component-background] px-3 py-2 text-sm text-[--component-foreground]\n          placeholder:text-[--component-foreground-muted]\n          focus:border-[--primary] focus:outline-none focus:ring-1 focus:ring-[--primary]\n          disabled:cursor-not-allowed disabled:opacity-50\n          ".concat(n?"focus:ring-0 focus:border-[--border] cursor-default":"","\n          ").concat(r,"\n        "),readOnly:n,...l}),s&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:s})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[466,294,93,429,6,191,358],()=>t(57282)),_N_E=e.O()}]);